Editor=Class({_allowedCommand:[],_hideTargets:[],_noHide:false,_buttons:[],_originalText:"",_lastCommand:"",_agent:{},_clickedHtmlMode:false,_firstHtmlWarning:true,blockElement:"P|DIV|TH|TD|LI|BLOCKQUOTE|H[1-6]|FORM|PRE",__init:function(g){var a=this;this.textArea=$(g);this.options=JINDO.extend({editmode:"wysiwyg",baseURL:Editor.baseURL,css:"style.css",charset:"utf-8",lang:"ko",toolbox:this.textArea.parentNode,resizable:true,minHeight:1000,layoutUrl:"",layoutPreviewUrl:"",docplugins:[],defaultDoc:"./default.html",unloadWarn:true,sizeGrip:null,bFocus:true,onResize:function(){},onLoad:function(){}},arguments[1]);var e=this.options;this._agent=$Agent();this.filter=new Editor.filterAgent();this.editmode=e.editmode;this._allowedCommand=new Array();this.toolbox=$(e.toolbox);this.toolbox.style.height=this.toolbox.offsetHeight+"px";this._makeToolbar();this.container=this.textArea.parentNode;this.iframe=this.container.insertBefore(this._makeIframe(),this.textArea);this._initDoc();if(this.editmode=="html"){this.iframe.style.display="none";}else{this.textArea.style.display="none";}this.iframe.style.height=this.options.minHeight+"px";this.textArea.style.height=this.options.minHeight+"px";Element.setCSS(this.textArea,{border:"0px",width:"100%",height:this.options.minHeight+"px"});this.container.appendChild(this.textArea);if(this.options.resizable){this._makeResize();}this._curtain=$C("div");this._curtain=document.body.insertBefore(this._curtain,document.body.firstChild);this._curtain.onmousedown=Event.stopProc;Element.setCSS(this._curtain,{display:"none",position:"fixed",backgroundColor:"black",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:"1000",filter:"alpha(Opacity=5)",opacity:"0.05"});var d=function(k){k=k||window.event;var h=k.srcElement;if(!h){return;}if(h.className==null||h.tagName==null){return;}if(h.className=="line_tooltip"||h.className=="iner"||h.className=="clse"||h.className=="txt"||h.className=="_line_cmt"){return;}if(h.tagName.toLowerCase()=="input"&&(h.type=="text"||h.type=="checkbox")){return;}if(h.tagName.toLowerCase()=="input"&&h.type=="checkbox"){return;}a._closeLastPlugin();};Event.register(document,"mousedown",d);Editor.instances[g]=this;this.setUnloadWarn(this.options.unloadWarn);this.resizeContentArea(this.options.minHeight);try{document.execCommand("BackgroundImageCache",false,true);}catch(c){}if(this._agent.OldIE){this.focusHolder1="focusHolderForIE1"+parseInt(Math.random()*10000);this.focusHolder2="focusHolderForIE2"+parseInt(Math.random()*10000);var f=this.textArea.parentNode;var b=document.createElement("DIV");b.position="relative";b.innerHTML='<input type="button" id="'+this.focusHolder1+'" style="position:absolute;width:0"><input type="button" id="'+this.focusHolder2+'" style="position:absolute;width:0">';f.appendChild(b);}this.base_obj=this._findNonStatic(this.toolbox)||this._findNonStatic(this.toolbox.offsetParent);this.base_pos=(this.base_obj)?Element.realPos(this.base_obj):{top:0,left:0};},_findNonStatic:function(a){if(!a){return a;}if(Element.getCSS(a,"position").match(/absolute|relative/i)){return a;}},_lockFocus:function(){if(!this._agent.IE){return;}try{$(this.focusHolder1).focus();$(this.focusHolder2).focus();}catch(a){setTimeout(this._lockFocus.bind(this),10);}},lockFocus:function(){setTimeout(this._lockFocus.bind(this),10);},_addDummyFocus:function(){var d=parent;var a=document;var b;while(d!=b&&d.document.domain==a.domain){a=d.document;b=d;d=d.parent;}var c=a.createElement("a");var e=a.getElementsByTagName("body")[0];c.setAttribute("href","#");e.insertBefore(c,e.firstChild);d.focus();c.focus();e.removeChild(c);},_initDoc:function(){var b=this;var f=this.options;var a=this.textArea.value.replace(/^\s+|\s+$/g,"");var d;try{d=this.getDocument();if(d==null||d.location.href=="about:blank"){throw new Error("access denied");}this.getWindow().editorInstance=this;if(a.length>0){this.setContent(a,true);}if(this.editmode=="wysiwyg"){if(this._agent.IE||this._agent.Safari){d.body.contentEditable=true;}else{d.designMode="On";}if(this.iframe.style.display!="none"){this.iframe.style.display="none";this.iframe.style.display="block";}this.tidyNbsp();}if(typeof f.onLoad=="function"){f.onLoad();}if(!this.options.bFocus){setTimeout(this._addDummyFocus,0);}}catch(c){setTimeout(this._initDoc.bind(this),100);return;}setTimeout(function(){b._initDocumentPlugin();},100);},_initDocumentPlugin:function(){var o=this;var h=this.options.docplugins;var p=["Focus","Blur","Click","Mouseup","Mousedown","Dblclick","Keypress","Keyup","Keydown"];var n=["Activate","Beforedeactivate"];var f,d,c,g,k=this._agent,l=this.getDocument();var b=function(){o._closeLastPlugin();};Event.register(l,k.IE?"activate":"focus",b);Event.register(l,"keydown",function(m){if(k.IE&&l.selection!=undefined&&l.selection.type.toLowerCase()=="control"&&m.keyCode==8){l.execCommand("delete",false,false);m.keyCode=0;}if(!m.ctrlKey&&!m.altKey&&m.keyCode!=9){return true;}var q=Editor.getHotkeyCode(m.ctrlKey,m.altKey,m.shiftKey,m.keyCode);try{if(Editor.hotkeys[q]){Editor.hotkeys[q](o,m.keyCode,{ctrl:m.ctrlKey,alt:m.altKey,shift:m.shiftKey});Event.stop(m);return false;}}catch(a){}return true;});Event.register(l,"keypress",b);Event.register(l,"mousedown",b);for(f=0;f<p.length;f++){c="on"+p[f];g=(k.IE&&n[f]?n[f]:p[f]).toLowerCase();for(d=0;d<h.length;d++){if(typeof Editor.plugins[h[d]].editor=="undefined"){Editor.plugins[h[d]].editor=this;}if(Editor.plugins[h[d]][c]){Event.register(l,g,Editor.plugins[h[d]][c].bindForEvent(Editor.plugins[h[d]]));}}}},tidyNbsp:function(){if(!this._agent.IE){return;}var b=this.getDocument().body.getElementsByTagName("P");for(var a=0;a<b.length;a++){if(b[a].childNodes.length==1&&b[a].innerHTML=="&nbsp;"){b[a].innerHTML="";}}},_execCommand:function(f,d,o){var m=this._agent;var g,n,c,b;var l=false;if(typeof d=="undefined"){d=null;}(g=this.getWindow()).document.body.focus();n=this.getDocument();c=o?o:this.getSelection();b=c.getRange();switch(f.toLowerCase()){case"backcolor":if(!m.Opera&&!m.Gecko){this.getDocument().body.style.backgroundColor=d;return;}break;case"createlink":break;case"hilitecolor":if(m.IE||m.Safari){f="backcolor";}break;case"insertimage":if(m.Safari){}break;case"inserthtml":if(d==null){d="";}if(m.chrome||m.Safari||m.IE){c.setHTML(d);return;}break;case"strikethrough":break;case"formatblock":if(m.OldIE){if(d.toLowerCase()=="blockquote"){n.execCommand("indent");return;}else{d=" <"+d+">";}}break;}try{n.execCommand(f,false,d||null);if(m.OldIE){var k=function(){var a=(c.type=="none");c.setRange(b);if(a){n.execCommand("unselect",false,null);}};setTimeout(k,10);}}catch(h){debugg.log(f+" : "+d);}},execCommand:function(g,b,f,c){var d=Editor.plugins[g];this._lastPushed=b;Editor.currentEditorInstance=this;if(this._allowedCommand.length>0&&!this._allowedCommand.has(g)){return;}for(var a in Editor.plugins){try{Editor.plugins[a].onCommand(g);}catch(h){}}if(d){try{this._execCommandPlugin(d,b,f);}catch(h){}}else{this._execCommandDefault(g,b,f,c);}this._lastCommand=g;return true;},_execCommandPlugin:function(f,b,e){var c=Editor.getSkin($(this.options.skin),f.name+"_items");f.editor=this;if(b==null&&this._buttons[f.name]){b=this._buttons[f.name];}if(!this._agent.IE&&f.name=="searchkeyword"){alert(Editor._("plugin.searchreplace.notsupport"));setTimeout(this.close.bind(this),10);return;}f.create(b,c);if(this._lastCommand!=f.name){this._closeLastPlugin(true);}if(this._agent.OldIE&&f.bPreserveSelection){var g=this.getSelection();if(g.type=="none"&&g.boudingHeight==0){this.getWindow().focus();}this.preserveSelection();}switch(f.type){case"simple":f.execute(b,e);break;case"list":case"menu":case"dialog":var h={top:0,left:0,right:0,bottom:0,limitLeft:0,limitRight:0};var a=Element.realPos(this.toolbox);this.base_obj=this._findNonStatic(this.toolbox)||this._findNonStatic(this.toolbox.offsetParent);this.base_pos=(this.base_obj)?Element.realPos(this.base_obj):{top:0,left:0};h.right=a.left+this.toolbox.offsetWidth-this.base_pos.left;h.bottom=a.top+this.toolbox.offsetHeight-this.base_pos.top;h.limitRight=h.right;if(f.type=="dialog"){h.top=a.top+50-this.base_pos.top;h.left=a.left+Math.round(this.toolbox.offsetWidth/2)-130-this.base_pos.left;}else{var d=Element.realPos(b);h.top=d.top+b.offsetHeight-1-this.base_pos.top;if(this._agent.Safari){h.left=d.left-100;}else{h.left=d.left-this.base_pos.left;}h.limitLeft=a.left-this.base_pos.left;}f.show(h);break;case"document":break;}},_execCommandDefault:function(d,g,b,n){this._closeLastPlugin(true);switch(d){case"checkEmbedObjectTag":if(this._clickedHtmlMode&&this._firstHtmlWarning){var k=this.getContent();if(k.indexOf("<embed")>-1||k.indexOf("<object")>-1||k.indexOf("<EMBED")>-1||k.indexOf("<OBJECT")>-1){alert("embed 또는 object 태그는 동작이 제한됩니다.");this._firstHtmlWarning=false;}}break;case"html":window.focus();if(b){Element.hide(this.iframe);Element.show(this.textArea);this.textArea.value="";this.textArea.style.witdth=this.textArea.offsetWidth+"px";this.textArea.value=this.getContent();this.editmode="html";this.allowCommand("html","summary","checkEmbedObjectTag");this._clickedHtmlMode=true;}else{this.editmode="wysiwyg";this.allowCommand();Element.show(this.iframe);Element.hide(this.textArea);this.setContent(this.textArea.value);this.tidyNbsp();}break;case"more":var h=$(b);var o=this;var c=function(){Element.hide(h);};var m=this.getDocument();var l=function(q){buttons=h.getElementsByTagName("IMG");for(var p in buttons){if(buttons[p]==q){return true;}}return false;};var a=function(){Event.unregister(m,"keypress",a);Event.unregister(m,"mousedown",a);o.hearPluginEvent=function(q,p){};Element.hide(h);};var f=function(){Event.register(m,"keypress",a);Event.register(m,"mousedown",a);o.hearPluginEvent=function(r,q){if(r=="close"&&!l(this._lastPushed)){a();}this._lastPushed=null;};var p=parseInt(h.style.width)|0;h.style.position="absolute";h.style.left=(g.offsetWidth-p)+"px";h.style.top=o._agent.IE?"20px":"9px";h.style.zIndex=100;h.onmousedown=Editor.stopEvent;Element.show(h);};if(Element.visible(h)){a();}else{f();}break;default:try{if(["insertorderedlist","insertunorderedlist","outdent","indent"].has(d)&&(new NodeRange(this.getWindow(),this.getDocument())).getType()=="table"){this._hideMenu();alert(Editor._("plugin.font.notableeditor"));return false;}this._execCommand(d,b,n);}catch(e){if(debugg){debugg.log("Error : "+e);}}}},_closeLastPlugin:function(a){if(this._noHide){return;}if(typeof a=="undefined"){a=false;}try{if(!a&&Editor.plugins[this._lastCommand].type=="dialog"){return;}Editor.plugins[this._lastCommand].close();this._lastCommand="";}catch(b){}},hearPluginEvent:function(b,a){},_makeIframe:function(){var a=$C("iframe");a.setAttribute("src",this.options.defaultDoc);a.setAttribute("frameBorder",0);a.setAttribute("allowTransparency",true);a.setAttribute("width","100%");a.setAttribute("height","100%");a.style.width="100%";a.style.height="100%";return a;},_makeToolbar:function(){var a=this.options;var m=this;var c=this.toolbox.getElementsByTagName("img");var f,b,l,h,k;var e=function(o,p,n){return function(q){m.execCommand(p,o,n);Event.stop(q||window.event);};};var g=function(n){(new Image).src=n.replace(Editor.imgRegex,"_over.$2");(new Image).src=n.replace(Editor.imgRegex,"_down.$2");};for(var d=0;d<c.length;d++){f=c[d].getAttribute("alt")+"";if(f.indexOf("command:")!=0){continue;}b=f.split(":");this._makeButton(c[d],b[1],b[2],e);g(c[d].src);}},_makeButton:function(b,d,a,c){b.setAttribute("title",Editor._("command."+d+".description"));b.setAttribute("nhn:command",d);b.setAttribute("nhn:argument",a);b.setAttribute("nhn:state","normal");b.setAttribute("alt",Editor._("command."+d+".description"));this._buttons[d]=b;try{b.style.cursor="pointer";}catch(f){b.style.cursor="hand";}if(d=="more"&&a&&$(a)){b.parentNode.style.position="relative";b.parentNode.appendChild($(a));}Event.register(b,"mousedown",Editor.buttonEvent.onMouseDown);Event.register(b,"mousedown",c(b,d,a));Event.register(b,"mouseup",Editor.buttonEvent.onMouseUp);Event.register(b,"mouseover",Editor.buttonEvent.onMouseOver);Event.register(b,"mouseout",Editor.buttonEvent.onMouseOut);try{Event.register(b,"dragstart",Event.stopProc);}catch(f){}},_makeResize:function(){var b=this;var a=b.options.sizeGrip?$(b.options.sizeGrip):null;this.bResizing=false;if(a==null){return;}this._resize_ondown=this._resizeOnDown.bindForEvent(this);this._resize_onmove=this._resizeOnMove.bindForEvent(this);this._resize_onup=this._resizeOnUp.bindForEvent(this);a.onmousedown=this._resize_ondown;a.onmouseup=this._resize_onup;},_resizeOnDown:function(a){if(this.bResizing){return;}this.bResizing=true;this._resizeDiff=0;this._resizeStartY=a.page_y;this._resizeStartH=this.toolbox.offsetHeight;this._resizeStartIframeH=this.iframe.offsetHeight;this._resizeStartTextAreaH=this.textArea.offsetHeight;if(this.editmode=="html"){this.textArea.parentNode.style.height=(this._resizeStartTextAreaH)+"px";this.textArea.style.display="none";}else{this.iframe.parentNode.style.height=(this._resizeStartIframeH)+"px";this.iframe.style.display="none";}Event.register(document,"mouseup",this._resize_onup);Event.register(document,"mousemove",this._resize_onmove);a.stop();},_resizeOnMove:function(g){var c=this.toolbox.offsetHeight-this.iframe.parentNode.offsetHeight+1;var f=g.page_y-this._resizeStartY;var d=this._resizeStartIframeH+f;var b=this._resizeStartTextAreaH+f;var a=(d<0?this.options.minHeight:d)+"px";var h=(b<0?this.options.minHeight:b)+"px";if(this._resizeStartH+f<this.options.minHeight+c){this.toolbox.style.height=this.options.minHeight?(this.options.minHeight)+"px":(Math.max(this.options.minHeight,this.getDocument().body.scrollHeight+c))+"px";}else{if(this.editmode=="html"){this.textArea.parentNode.style.height=h;this.textArea.style.height=h;this.iframe.style.height=h;}else{this.iframe.parentNode.style.height=a;this.iframe.style.height=a;this.textArea.style.height=a;}this.toolbox.style.height=(this._resizeStartH+f)+"px";}this.options.onResize();g.stop();},_resizeOnUp:function(a){this.bResizing=false;if(this.editmode=="html"){this.textArea.style.display="";}else{this.iframe.style.display="";}Event.unregister(document,"mousemove",this._resize_onmove);Event.unregister(document,"mouseup",this._resize_onup);a.stop();},_refreshIE:function(){this.iframe.style.display="none";this.iframe.style.display="";},preserveSelection:function(){var b=this;var a=this.getSelection().getRange();this._noHide=true;setTimeout(function(){b.getSelection().setRange(a);b._noHide=false;},5);},getWindow:function(){return this.iframe.contentWindow||this.iframe;},getDocument:function(){try{return this.iframe.contentWindow.document;}catch(a){return null;}},getContent:function(b){var a="";b=b||false;if(this.editmode=="wysiwyg"){a=this.getDocument().body.innerHTML;if(/^<br[ ]*\/?>$/i.test(a)){a="";}if(a){a=this.filter.execute(a,"HTML");}}else{a=this.textArea.value;}if(a&&b){a=this.filter.execute(a,"Save");}return a;},setContent:function(b,a){a=a||false;if(a){b=this.filter.execute(b,"Load");this._originalText=b.replace(/<br\s*\/?>|\n|\r|&nbsp;/,"");}if(this.editmode=="wysiwyg"){b=this.filter.execute(b,"Edit");this.getDocument().body.innerHTML=b;}else{this.textArea.value=b;}},getSelection:function(){return new Editor.Selection(this);},allowCommand:function(){var b=$(this.options.toolbox).getElementsByTagName("img");var a=$A(arguments);if(a.length){this._allowedCommand.push.apply(this._allowedCommand,a);}else{this._allowedCommand=[];}$A(b).each(function(c){if(c.getAttribute("alt")==null){return;}if(c.getAttribute("alt").indexOf("command:")!=0){return;}var e=c.getAttribute("alt").substr(8);var d=(!a.length||a.has(e));c.setAttribute("nhn:state",d?"normal":"disable");Element.setCSS(c,{filter:d?"":"Alpha(Opacity=30)",opacity:d?"":0.3});});},setUnloadWarn:function(c,b){var a=this;c=c||false;if(c){window.onbeforeunload=function(){if(a.isChanged()){return Editor._("event.onexit.message");}};}else{if(!b){window.onbeforeunload=null;}}},isChanged:function(){var a=this.getContent().replace(/<br\s*\/?>|\n|\r|&nbsp;/,"");return(a!=this._originalText);},resizeContentArea:function(a){var b=this.toolbox.offsetHeight-this.iframe.parentNode.offsetHeight+1;this.toolbox.style.height=a?(a)+"px":(Math.max(this.options.minHeight,this.getDocument().body.scrollHeight+b))+"px";this.options.onResize();},_getFirstRealChild:function(b){var a=b.firstChild;while(a&&a.nodeType==3&&a.nodeValue==""){a=a.nextSibling;}return a;},_getLastRealChild:function(b){var a=b.lastChild;while(a&&a.nodeType==3&&a.nodeValue==""){a=a.previousSibling;}return a;},_getNodesBetween:function(b,a){var c=[];this._nNodesBetweenLen=0;if(!b||!a){return c;}try{this._recurGetNextNodesUntil(b,a,c);}catch(d){return[];}return c;},_recurGetNextNodesUntil:function(d,a,b){if(!d){return false;}if(!this._recurGetChildNodesUntil(d,a,b)){return false;}var c=d.nextSibling;while(!c){if(!(d=DOMFix.parentNode(d))){return false;}b[this._nNodesBetweenLen++]=d;if(d==a){return false;}c=d.nextSibling;}return this._recurGetNextNodesUntil(c,a,b);},_recurGetChildNodesUntil:function(e,a,d){if(!e){return false;}var b=false;var c=e;if(c.firstChild){c=c.firstChild;while(c){if(!this._recurGetChildNodesUntil(c,a,d)){b=true;break;}c=c.nextSibling;}}d[this._nNodesBetweenLen++]=e;if(b){return false;}if(e==a){return false;}return true;},applyLinkToText:function(){if(this.editmode!="wysiwyg"){return;}var c="@"+(new Date()).getTime()+"@";var k=new RegExp(c,"g");var n=this._cloneNode(this.getDocument().body);if(!n||typeof n=="undefined"){return;}var q=this._getFirstRealChild(n);var b=this._getLastRealChild(n);var p=this._getNodesBetween(q,b);var d=$A(p);var f=d.filter(function(e){return(e&&e.nodeType===3);});var o=f.length;for(var h=0;h<o;h++){var a=f[h].parentNode;var g=false;while(a){if(a.tagName==="A"||a.tagName==="PRE"){g=true;break;}a=a.parentNode;}if(g){continue;}var l=$C("DIV");l.innerHTML="";try{l.appendChild(this._cloneNode(f[h]));l.innerHTML=(c+l.innerHTML).replace(/(&nbsp|\s)?(((?!https?:\/\/)www\.(?:(?!\&nbsp;|\s|"|').)+)|(https?:\/\/(?:(?!&nbsp;|\s|"|').)+))/ig,this._generateAutoLink);f[h].parentNode.insertBefore(l,f[h]);f[h].parentNode.removeChild(f[h]);}catch(m){}while(l.firstChild){l.parentNode.insertBefore(l.firstChild,l);}l.parentNode.removeChild(l);}try{n.innerHTML=n.innerHTML.replace(k,"");this.getDocument().body.innerHTML=n.innerHTML;}catch(m){}},_cloneNode:function(c){if(!c){return;}var d=d||{ELEMENT_NODE:1};var b=this.getDocument();if(c.nodeType==d.ELEMENT_NODE){var e=b.createDocumentFragment();var a=c.cloneNode(false);e.appendChild(a);a.innerHTML=c.innerHTML;return e.firstChild;}else{return c.cloneNode(true);}},_generateAutoLink:function(f,d,e,c,a){d=d||"";var b;if(c){b='<a href="http://'+c+'">'+e+"</a>";}else{b='<a href="'+a+'">'+e+"</a>";}return d+b;},closePluginLayer:function(){this._closeLastPlugin();}});Editor.Selection=Class({_range:null,_selection:null,type:"none",startNode:null,endNode:null,startContainer:null,endContainer:null,parentElement:null,startBoundary:null,endBoundary:null,__init:function(d){var c,b,a,e;this._editor=d;this._win=d.getWindow();this._doc=d.getDocument();this._ie=!(this._win.getSelection);this.refresh();},refresh:function(){this._selection=this.getSelection();this._range=this.getRange();if(!this._range){return;}if(this._ie){this.type=this._selection.type.toLowerCase();if(this.type=="control"){this.startContainer=this._range.item(0);this.endContainer=this.startNode=this.endNode=this.startContainer;this.parentElement=this.startNode.parentNode;return;}this.parentElement=this._range.parentElement();rng_start=this._range.duplicate();rng_end=this._range.duplicate();}else{this._selection=this._win.getSelection();this._range=this._selection.getRangeAt(0);if(this._range.toString()==""){this.type="none";if(this._range.startContainer.nodeType==1&&this._range.startContainer===this._range.endContainer){this.type="control";this.startContainer=this._range.startContainer;this.endContainer=this.startNode=this.endNode=this.startContainer;this.parentElement=this.startNode.parentNode;return;}}else{this.type="text";}this.parentElement=this._range.commonAncestorContainer;while(this.parentElement.nodeType!=1){this.parentElement=this.parentElement.parentNode;}rng_start=this.getRange().cloneRange();rng_end=this.getRange().cloneRange();}rng_start.collapse(true);rng_end.collapse(false);if(this._ie){this.startContainer=rng_start.parentElement();this.endContainer=rng_end.parentElement();var b,c=null;if(this.startContainer.childNodes.length==0){this.startNode=this.startContainer;}else{for(var a=0;a<this.startContainer.childNodes.length;a++){b=this.startContainer.childNodes[a];if(b.nodeType==3){c=b;}if(b.nodeType!=1){continue;}if(b.offsetTop>rng_start.offsetTop){break;}if(b.offsetTop==rng_start.offsetTop&&b.offsetLeft>rng_start.offsetLeft){break;}}this.startNode=c?c:b;}if(rng_start.isEqual(rng_end)){this.endNode=this.startNode;}else{if(this.endContainer.childNodes.length==0){this.endNode=this.endContainer;}else{c=null;for(var a=this.endContainer.childNodes.length-1;a>=0;a--){b=this.endContainer.childNodes[a];if(b.nodeType==3){c=b;}if(b.nodeType!=1){continue;}if(b.offsetTop<rng_end.offsetTop){break;}if(b.offsetTop==rng_end.offsetTop&&b.offsetLeft<rng_end.offsetLeft){break;}}this.endNode=c?c:b;}}}else{this.startNode=this._range.startContainer;this.endNode=this._range.endContainer;if(this.startNode.nodeType!=1){this.startContainer=this.startNode.parentNode;}if(this.endNode.nodeType!=1){this.endContainer=this.endNode.parentNode;}}},getHTML:function(){if(this._ie){return this._range.htmlText;}var a=$C("div");a.appendChild(this._range.cloneContents());return a.innerHTML;},setHTML:function(c){if(this._ie){if(this.type=="control"){this.startNode.outerHTML=c;}else{this._range.pasteHTML(c);}return;}var b=this.getRange();var d=this._doc.createElement("div");d.innerHTML=c;var a=d.lastChild;this._range.deleteContents();while(d.lastChild){this._range.insertNode(d.lastChild);}b.setStartAfter(a);this._selection.removeAllRanges();this._selection.addRange(b);this.refresh();},inSelection:function(b){var a;if(this._ie){while(b.nodeType!=1){b=b.parentNode;}a=this._doc.body.createTextRange();a.moveToElementText(b);return this._range.inRange(a);}else{return this._selection.containsNode(b,false);}},isSelected:function(){this.refresh();if(this._ie){return(this._selection.type.toLowerCase()!="none");}else{return(this._selection.rangeCount>0);}},focus:function(){try{var a,b=this._doc.body.appendChild(this._doc.createElement("span"));if(this._win.getSelection){a=this._doc.createRange();a.selectNode(b);this.setRange(a);}else{if(this._doc.selection){a=this._doc.body.createTextRange();a.moveToElementText(b);a.select();}}b.parentNode.removeChild(b);}catch(c){}},setStartBefore:function(c){if(this._ie){var b=this._doc.body.createTextRange();var a=this._doc.createElement("a");a.innerHTML="gony";c.parentNode.insertBefore(a,c);b.moveToElementText(a);this._range.setEndPoint("StartToStart",b);a.parentNode.removeChild(a);}else{this._range.setStartBefore(c);}},setEndAfter:function(c){if(this._ie){var b=this._doc.body.createTextRange();var a=this._doc.createElement("a");a.innerHTML="gony";if(c.nextSibling){c.parentNode.insertBefore(a,c.nextSibling);}else{c.parentNode.appendChild(a);}b.moveToElementText(a);this._range.setEndPoint("EndToEnd",b);a.parentNode.removeChild(a);}else{this._range.setEndAfter(c);}},selectNode:function(b,a){if(!a){a=b;}this.setStartBefore(b);this.setEndAfter(a);if(this._ie){this._range.select();}},getSelection:function(){if(this._win.getSelection){return this._win.getSelection();}else{if(this._doc.selection){return this._doc.selection;}else{return null;}}},getRange:function(){var a=null;if(this._ie){a=this._selection.createRange();}else{if(this._selection.rangeCount){a=this._selection.getRangeAt(0);}}return a;},setRange:function(b){if(!b){return;}try{if(this._ie){b.select();}else{this._selection=this._win.getSelection();this._selection.removeAllRanges();this._selection.addRange(b);}}catch(a){}this.refresh();},getAllNode:function(){if(this.type=="control"){return[this.startNode];}if(this.startBoundary==null||this.endBoundary==null){throw"Please run createTempBoundary before";}if(this.startBoundary.nextSibling===this.endBoundary){return[];}var e,b=new Array;var c=function(f){if(f.nodeType!=1){return;}for(var g=0;g<f.childNodes.length;g++){b.push(f.childNodes[g]);c(f.childNodes[g]);}};e=this.startBoundary;while(true){if(!e.nextSibling){e=e.parentNode;if(e===this.parentElement){break;}continue;}e=e.nextSibling;if(e.nodeType==3){b.push(e);continue;}if(!this.inSelection(e)){break;}b.push(e);c(e);}e=this.endBoundary;while(true){if(!e.previousSibling){e=e.parentNode;if(e===this.parentElement){break;}continue;}e=e.previousSibling;if(e.nodeType==3){b.push(e);continue;}if(!this.inSelection(e)){break;}b.push(e);c(e);}var d,a;for(d=0;d<b.length-1;d++){for(a=d+1;a<b.length;a++){if(b[d]===b[a]){b.splice(a,1);}}}return b;},createTempBoundary:function(){this.startBoundary=null;this.endBoundary=null;if(this.type=="control"){return;}var e=(new Date()).getTime();var d='<span id="tmpBoundary_'+e+'_start">[</span>';var c='<span id="tmpBoundary_'+e+'_end">]</span>';var b=this.getRange();var g=b.cloneRange?b.cloneRange():b.duplicate();var a=b.cloneRange?b.cloneRange():b.duplicate();g.collapse(true);a.collapse(false);if(this._ie){if(g.isEqual(a)){g.pasteHTML(d+c);return;}else{g.pasteHTML(d);a.pasteHTML(c);}this.startBoundary=this._doc.getElementById("tmpBoundary_"+e+"_start");this.endBoundary=this._doc.getElementById("tmpBoundary_"+e+"_end");g.moveToElementText(this.startBoundary);a.moveToElementText(this.endBoundary);b.setEndPoint("EndToStart",a);b.setEndPoint("StartToEnd",g);b.select();}else{var f=$C("div");f.innerHTML=c;c=f.firstChild;a.insertNode(c);f.innerHTML=d;d=f.firstChild;g.insertNode(d);b.setEndBefore(c);b.setStartAfter(d);this.startBoundary=d;this.endBoundary=c;}this.refresh();},removeTempBoundary:function(){if(this.startBoundary){this.startBoundary.parentNode.removeChild(this.startBoundary);}if(this.endBoundary){this.endBoundary.parentNode.removeChild(this.endBoundary);}this.startBoundary=null;this.endBoundary=null;},surround:function(b){var a=this._doc.createElement(b);if(this._ie){var d="test_"+parseInt(Math.random()*10000);var c=a.id;a.innerHTML=this._range.htmlText;a.id=d;this._range.pasteHTML(a.outerHTML);a=this._doc.getElementById(d);this.selectNode(a);a.id=c;}else{this._range.surroundContents(a);}return a;}});Editor.baseURL="./";Editor.plugins={};Editor.loadPlugin=function(b){var a=Editor.baseURL+"plugin/"+b+"/"+b+".plugin.js";document.write('<script type="text/javascript" src="'+a+'"><\/script>');};Editor.registerPlugin=function(a){Editor.plugins[a.name]=a;};Editor.unregisterPlugin=function(a){Editor.plugins[a.name]=null;};Editor.imgRegex=/(_(?:over|down))?\.([0-9a-z]+)$/gi;Editor.buttonEvent={getInfo:function(f){f=f||window.event;var b=f.target||f.srcElement;var d=b.getAttribute("nhn:command");var a=b.getAttribute("nhn:argument");var c=b.getAttribute("nhn:state");if(b.tagName.toUpperCase()!="IMG"){return null;}if(c=="disable"||c=="active"){Event.stop(f);}return{element:b,state:c,command:d,argument:a};},onMouseOver:function(b){var a=Editor.buttonEvent.getInfo(b);if(a==null){return;}if(a.state=="disable"||a.state=="active"){return;}try{a.element.src=a.element.src.replace(Editor.imgRegex,"_over.$2");}catch(b){}},onMouseOut:function(b){var a=Editor.buttonEvent.getInfo(b);if(a==null){return;}if(a.state=="disable"||a.state=="active"){return;}try{a.element.src=a.element.src.replace(Editor.imgRegex,".$2");}catch(b){}},onMouseDown:function(b){var a=Editor.buttonEvent.getInfo(b);if(a==null){return;}if(a.state=="disable"){return;}try{a.element.src=a.element.src.replace(Editor.imgRegex,"_down.$2");}catch(b){}},onMouseUp:function(b){var a=Editor.buttonEvent.getInfo(b);if(a==null){return;}if(a.state=="disable"||a.state=="active"){return;}try{a.element.src=a.element.src.replace(Editor.imgRegex,".$2");}catch(b){}}};Editor.getSkin=function(a,d){for(var b=0;b<a.childNodes.length;b++){if(a.childNodes[b].nodeType!=1){continue;}if(Element.hasClass(a.childNodes[b],d)){var c=a.childNodes[b];c.style.display="none";return c;}}return null;};Editor.hotkeys=new Array;Editor.getHotkeyCode=function(c,d,a,b){c=c?2:0;d=d?4:0;a=a?8:0;return(c+d+a)*1000+b;};Editor.getHotkeyCodeFromStr=function(a){var d=function(f,e){return(f.indexOf(e)!=-1);};var c=a.replace(/\s+/g,"").toUpperCase();var b=c.replace(/(shift|ctrl|alt|\+)/gi,"");switch(b){case"TAB":b=9;break;case"BKSP":b=8;break;case"SPACE":b=32;break;case";":b=59;break;case"'":b=222;break;case",":b=188;break;case".":b=190;break;case"/":b=191;break;default:b=b.charCodeAt(0);break;}return Editor.getHotkeyCode(d(c,"CTRL"),d(c,"ALT"),d(c,"SHIFT"),b);};Editor.registerHotkey=function(a,b){var d=Editor.getHotkeyCodeFromStr(a);Editor.hotkeys[d]=b;};Editor.unregisterHotkey=function(a){var b=Editor.getHotkeyCodeFromStr(a);Editor.hotkeys[b]=null;};Editor._=function(a){if(typeof Editor.lang=="undefined"){return a;}if(typeof Editor.lang[a]=="undefined"){return a;}return unescape(Editor.lang[a]);};Editor.stopEvent=function(a){var b=a||window.event;try{b.returnValue=false;b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation();}if(b.srcElement.tagName.toLowerCase()!="input"&&b.preventDefault){b.preventDefault();}}catch(b){}};Editor.Dialog={_startPos:[0,0],_startMouse:[0,0],register:function(c,b){var a=this;b.onmousedown=function(){};},mousedown:function(a){this._startPos=[parseInt(Editor.Dialog.activeDialog.style.left),parseInt(Editor.Dialog.activeDialog.style.top)];this._startMouse=[a.page_x,a.page_y];Event.register(document,"mousemove",this.mousemove);Event.register(document,"mouseup",this.mouseup);Event.stop(a);},mousemove:function(c){if(!Editor.Dialog.activeDialog){return;}var b=this._startMouse[0]-c.page_x;var a=this._startMouse[1]-c.page_y;Element.setCSS(Editor.Dialog.activeDialog,{left:(this._startPos[0]+b),top:(this._startPos[1]+a)});},mouseup:function(){Editor.Dialog.activeDialog=null;Event.unregister(document,"mousemove",this.mousemove);Event.unregister(document,"mouseup",this.mouseup);}};Editor.Dialog.activeDialog=null;Editor.instances={};Editor.$=function(a){return(typeof Editor.instances[a]=="undefined")?null:Editor.instances[a];};Editor.filterAgent=Class({_filters:[],__init:function(){},register:function(a){this._filters.push(a);},unregister:function(a){this._filters=this._filters.reject(a);},execute:function(b,d){for(var a=0;a<this._filters.length;a++){if(typeof this._filters[a]["on"+d]!="undefined"){try{b=this._filters[a]["on"+d](b);}catch(c){}}}return b;}});Editor.simplePlugin=Class({type:"simple",editor:null,bPreserveSelection:true,_button:null,onCreate:function(){},onExecute:function(){},create:function(a){if(this.__created){return true;}this._button=a;this.onCreate();this.__created=true;},execute:function(a,b){this.onExecute(a,b);}});Editor.basePlugin=Class({type:"",html:"",editor:null,bPreserveSelection:true,_button:null,_object:null,_agent:null,onCreate:function(){},onShow:function(){},onClose:function(){},__init:function(){this.editor=null;this._object=null;this._button=null;this._agent=$Agent();this.__created=false;this.__bindAction={};},_createObject:function(a){if(this._object==null){this._object=$(a);var b=this._object.innerHTML;b=b.replace(/\{act\|([a-z0-9_\-]+)(\|([^{}]+))?\}/ig,"Editor.plugins."+this.name+".executeAction(event,'$1',[$3])");this._object.innerHTML=b;this._object.style.position="absolute";this._object.style.zIndex=105;this._object.onmousedown=function(d){d=d||window.event;var c=d.srcElement;if(c.tagName.toLowerCase()=="input"&&c.type=="text"){return;}Editor.stopEvent(d);};this.editor.toolbox.parentNode.appendChild(this._object);this.object=this._object;}},assignAction:function(d){var e=this;var b=$A(arguments);b.shift();var c=[d,b];return function(a){if(c.length>2){c.shift();}c.unshift(a);return e.executeAction.apply(e,c);};},executeAction:function(d,b,a){var c=this;var b=b.toLowerCase();b=b.substr(0,1).toUpperCase()+b.substr(1);if(c["act"+b]){c["act"+b].apply(c,a);}return Event.stop(d||window.event);},create:function(b,a){if(this.__created){return true;}this._button=b;this._createObject(a);this.onCreate();this.__created=true;},show:function(f){var b=this._button;var a=this._object;var d=0;if(b.getAttribute("nhn:state")=="active"){this.close();return;}this._object.style.top=f.top+"px";Element.show(a);try{if(this.onShow(b,b.getAttribute("nhn:argument"))===false){return;}}catch(c){}this._object.style.top=f.top+"px";if(f.left+a.offsetWidth>f.right){d=f.left+b.offsetWidth-a.offsetWidth;}else{d=f.left;}if(f.limitLeft>d){d=f.limitLeft+10;}a.style.left=d+"px";try{b.src=b.src.replace(Editor.imgRegex,"_down.$2");}catch(c){}b.setAttribute("nhn:state","active");this.editor.hearPluginEvent("show",this);},close:function(){var a=document.activeElement;if(a&&a.tagName.toLowerCase()=="input"&&a.type=="text"){a.blur();}this.onClose();Element.hide(this._object);try{this._button.src=this._button.src.replace(Editor.imgRegex,".$2");}catch(b){}this._button.setAttribute("nhn:state","normal");this.editor.hearPluginEvent("close",this);}});Editor.menuPlugin=Class.extend(Editor.basePlugin,{type:"menu"});Editor.dialogPlugin=Class.extend(Editor.basePlugin,{type:"dialog",modal:true,_createObject$:Editor.basePlugin.prototype._createObject,_createObject:function(a){var c=true;if(this._object==null){c=false;}this._createObject$(a);var b=this._object.getElementsByTagName("H4")[0].parentNode;if(!c){b.unselectable=true;b.onmousedown=this.onMouseDown.bindForEvent(this);this.onmousemove=this.onMouseMove.bindForEvent(this);this.onmouseup=this.onMouseUp.bindForEvent(this);this._object.onmousedown=Editor.stopEvent;}},onMouseDown:function(a){this._startPos=[parseInt(this._object.style.left),parseInt(this._object.style.top)];this._startMouse=[a.page_x,a.page_y];Event.register(document,"mousemove",this.onmousemove);Event.register(document,"mouseup",this.onmouseup);Event.stop(a);},onMouseMove:function(c){var b=c.page_x-this._startMouse[0];var a=c.page_y-this._startMouse[1];Element.setCSS(this._object,{left:(this._startPos[0]+b),top:(this._startPos[1]+a)});},onMouseUp:function(){Event.unregister(document,"mousemove",this.onmousemove);Event.unregister(document,"mouseup",this.onmouseup);}});Editor.documentPlugin=Class({type:"document"});var hotkey_indent=function(c,a,b){c.execCommand(b.shift?"outdent":"indent",null);};Editor.registerHotkey("Tab",hotkey_indent);Editor.registerHotkey("Shift+Tab",hotkey_indent);var hotkey_basic=function(d,a,b){var f=String.fromCharCode(a);var e={B:"bold",I:"italic",U:"underline",Z:"undo",Y:"redo"};if(e[f]){d.execCommand(e[f],null);}};Editor.registerHotkey("Ctrl+B",hotkey_basic);Editor.registerHotkey("Ctrl+I",hotkey_basic);Editor.registerHotkey("Ctrl+U",hotkey_basic);Editor.registerHotkey("Ctrl+Z",hotkey_basic);Editor.registerHotkey("Ctrl+Y",hotkey_basic);Editor.lang={"command.undo.description":"%uC2E4%uD589%20%uCDE8%uC18C","command.redo.description":"%uB2E4%uC2DC%20%uC2E4%uD589","command.fontsize.description":"%uAE00%uC790%uD06C%uAE30","command.fontcolor.description":"%uAE00%uC790%uC0C9%uC0C1","command.fontbackgroundcolor.description":"%uBC30%uACBD%uC0C9%uC0C1","command.strikethrough.description":"%uCDE8%uC18C%uC120","command.justifyleft.description":"%uC67C%uCABD%20%uC815%uB82C","command.justifycenter.description":"%uC911%uAC04%20%uC815%uB82C","command.justifyright.description":"%uC624%uB978%uCABD%20%uC815%uB82C","command.justifyfull.description":"%uC591%uCABD%20%uC815%uB82C","command.bold.description":"%uAD75%uAC8C%28Ctrl+B%29","command.more.description":"%uB354%uBCF4%uAE30","command.italic.description":"%uAE30%uC6B8%uAC8C%28Ctrl+I%29","command.underline.description":"%uBC11%uC904%28Ctrl+U%29","command.fontname.description":"%uAE00%uAF34","command.lineheight.description":"%uC904%uAC04%uACA9","command.emoticoninsertion.description":"%uC774%uBAA8%uD2F0%uCF58","command.hyperlink.description":"%uB9C1%uD06C","command.indent.description":"%uB4E4%uC5EC%uC4F0%uAE30","command.outdent.description":"%uB0B4%uC5B4%uC4F0%uAE30","command.image.description":"%uC774%uBBF8%uC9C0","command.quote.description":"%uC778%uC6A9%uAD6C%20%uC124%uC815/%uD574%uC81C","command.inserttable.description":"%uD45C%20%uC0BD%uC785","command.scharinsertion.description":"%uD2B9%uC218%uAE30%uD638%20%uC0BD%uC785","command.searchkeyword.description":"%uCC3E%uAE30/%uBC14%uAFB8%uAE30","command.spellcheck.description":"%uB9DE%uCDA4%uBC95%20%uAC80%uC0AC","command.insertorderedlist.description":"%uC22B%uC790%uBAA9%uB85D","command.insertunorderedlist.description":"%uAE30%uD638%uBAA9%uB85D","command.layoutmanager.description":"%uB808%uC774%uC544%uC6C3%20%uB9E4%uB2C8%uC800","command.linesticker.description":"%uB77C%uC778%uC2A4%uD2F0%uCEE4","event.onexit.message":"%uC774%20%uD398%uC774%uC9C0%uB97C%20%uBC97%uC5B4%uB098%uC2DC%uBA74%20%uC791%uC131%20%uC911%uC778%20%uAE00%uC774%20%uC9C0%uC6CC%uC9D1%uB2C8%uB2E4.","plugin.searchreplace.inputkeyword":"%uCC3E%uC73C%uC2E4%20%uB2E8%uC5B4%uB97C%20%uC785%uB825%uD574%20%uC8FC%uC138%uC694.","plugin.searchreplace.notfound":"%uCC3E%uC73C%uC2E4%20%uB2E8%uC5B4%uAC00%20%uC5C6%uC2B5%uB2C8%uB2E4.","plugin.searchreplace.noreplace":"%uB354%20%uC774%uC0C1%20%uBC14%uAFC0%20%uB2E8%uC5B4%uAC00%20%uC5C6%uC2B5%uB2C8%uB2E4.","plugin.searchreplace.allreplace1":"%uC77C%uCE58%uD558%uB294%20%uB0B4%uC6A9%uC774%20%uCD1D%20","plugin.searchreplace.allreplace2":"%uAC74%20%uBC14%uB00C%uC5C8%uC2B5%uB2C8%uB2E4.","plugin.searchreplace.notsupport":"%uBCF8%20%uAE30%uB2A5%uC740%20Internet%20Explorer%uC5D0%uC11C%uB9CC%20%uC774%uC6A9%uD558%uC2E4%20%uC218%20%uC788%uC2B5%uB2C8%uB2E4.\n%uC774%uC6A9%uC5D0%20%uBD88%uD3B8%uC744%20%uB4DC%uB824%20%uC8C4%uC1A1%uD569%uB2C8%uB2E4.","plugin.spellcheck.directinput":"%uC9C1%uC811%uC785%uB825","plugin.spellcheck.nosuggest":"%uCD94%uCC9C%20%uB2E8%uC5B4%uAC00<br>%20%uC5C6%uC2B5%uB2C8%uB2E4.","plugin.spellcheck.checkinfomessage":"%uB9DE%uCDA4%uBC95%uC5D0%20%uC5B4%uAE0B%uB09C%20%uB2E8%uC5B4%uAC00%20<strong>{NUMBER}%uAC1C</strong>%20%uC788%uC2B5%uB2C8%uB2E4.","plugin.spellcheck.waitmessage1":"%uAE00%uC758%20%uB0B4%uC6A9%uC774%20%uAE34%20%uACBD%uC6B0%20%uB9DE%uCDA4%uBC95%20%uAC80%uC0AC%uC5D0%20%uB9CE%uC740%20%uC2DC%uAC04%uC774%20%uC18C%uC694%uB420%20%uC218%20%uC788%uC2B5%uB2C8%uB2E4.\n%uD655%uC778%uBC84%uD2BC%uC744%20%uB204%uB978%20%uD6C4%2C%20%uAC80%uC0AC%uACB0%uACFC%uAC00%20%uB098%uC62C%20%uB54C%20%uAE4C%uC9C0%20%uC7A0%uC2DC%uB9CC%20%uAE30%uB2E4%uB824%20%uC8FC%uC138%uC694.","plugin.spellcheck.waitmessage2":"%uC8C4%uC1A1%uD569%uB2C8%uB2E4.%20%uAE00%uC758%20%uB0B4%uC6A9%uC774%20%uB108%uBB34%20%uAE38%uC5B4%20%uB9DE%uCDA4%uBC95%20%uAC80%uC0AC%uB97C%20%uC774%uC6A9%uD558%uC2E4%20%uC218%20%uC5C6%uC2B5%uB2C8%uB2E4.\n%uD5A5%uD6C4%20%uAC1C%uC120%uB420%20%uC608%uC815%uC774%uC624%uB2C8%20%uBD88%uD3B8%uD558%uC2DC%uB354%uB77C%uB3C4%20%uC591%uD574%20%uBD80%uD0C1%uB4DC%uB9BD%uB2C8%uB2E4.","plugin.font.ganadaramabasa":"%uAC00%uB098%uB2E4%uB77C%uB9C8%uBC14%uC0AC","plugin.font.ganadarama":"%uAC00%uB098%uB2E4%uB77C%uB9C8","plugin.font.ganada":"%uAC00%uB098%uB2E4","plugin.font.dotum":"%uB3CB%uC6C0","plugin.font.dotumche":"%uB3CB%uC6C0%uCCB4","plugin.font.gulim":"%uAD74%uB9BC","plugin.font.gulimche":"%uAD74%uB9BC%uCCB4","plugin.font.batang":"%uBC14%uD0D5","plugin.font.batangche":"%uBC14%uD0D5%uCCB4","plugin.font.gunseo":"%uAD81%uC11C","plugin.fontcolor.checkcolor":"%uC0C9%uC0C1%20%uCF54%uB4DC%uB97C%20%uC62C%uBC14%uB974%uAC8C%20%uC785%uB825%uD558%uC5EC%20%uC8FC%uC2DC%uAE30%20%uBC14%uB78D%uB2C8%uB2E4.\n\n%uC608%29%20%23000000%2C%20%23FF0000%2C%20%23FFFFFF%2C%20%23ffffff%2C%20ffffff","plugin.fontbackgroundcolor.checkcolor":"%uC0C9%uC0C1%20%uCF54%uB4DC%uB97C%20%uC62C%uBC14%uB974%uAC8C%20%uC785%uB825%uD558%uC5EC%20%uC8FC%uC2DC%uAE30%20%uBC14%uB78D%uB2C8%uB2E4.\n\n%uC608%29%20%23000000%2C%20%23FF0000%2C%20%23FFFFFF%2C%20%23ffffff%2C%20ffffff","plugin.table.checkcolor":"%uC0C9%uC0C1%20%uCF54%uB4DC%uB97C%20%uC62C%uBC14%uB974%uAC8C%20%uC785%uB825%uD558%uC5EC%20%uC8FC%uC2DC%uAE30%20%uBC14%uB78D%uB2C8%uB2E4.\n\n%uC608%29%20%23000000%2C%20%23FF0000%2C%20%23FFFFFF%2C%20%23ffffff%2C%20ffffff","plugin.table.checkborder":"1%uC774%uC0C1%2C%2010%20%uC774%uD558%uC758%20%uC218%20%uB9CC%20%uC785%uB825%uC774%20%uB429%uB2C8%uB2E4.","plugin.table.checksize":"1%uC774%uC0C1%2C%2020%20%uC774%uD558%uC758%20%uC218%20%uB9CC%20%uC785%uB825%uC774%20%uB429%uB2C8%uB2E4.","plugin.font.notableeditor":"%uD14C%uC774%uBE14%20%uD3B8%uC9D1%uAE30%uAC00%20%uD65C%uC131%uD654%uB41C%20%uC0C1%uD0DC%uC5D0%uC11C%uB294%20%uD574%uB2F9%20%uAE30%uB2A5%uC744%20%uC0AC%uC6A9%uD558%uC2E4%uC218%20%uC5C6%uC2B5%uB2C8%uB2E4.","plugin.tabledlist.maxemoticon":"%uC774%uBAA8%uD2F0%uCF58%uC740%20%uD3EC%uC2A4%uD2B8%uB2F9%20100%uAC1C%uAE4C%uC9C0%uB9CC%20%uC0AC%uC6A9%uD560%20%uC218%20%uC788%uC2B5%uB2C8%uB2E4.","plugin.hyperlink.invalidurl":"%uC785%uB825%uD558%uC2E0%20URL%uC774%20%uC62C%uBC14%uB974%uC9C0%20%uC54A%uC2B5%uB2C8%uB2E4.","plugin.hyperlink.nolink4storyphoto":"%uC2A4%uD1A0%uB9AC%uD3EC%uD1A0%uC5D0%uB294%20URL%20%uAC78%uAE30%uB97C%20%uD560%20%uC218%20%uC5C6%uC2B5%uB2C8%uB2E4.","plugin.layoutmanager.cancel":"%uB808%uC774%uC544%uC6C3%20%uC801%uC6A9%uC744%20%uCDE8%uC18C%uD558%uC2DC%uACA0%uC2B5%uB2C8%uAE4C%3F","plugin.layoutmanager.notinsert":"%uB808%uC774%uC544%uC6C3%20%uC548%uC5D0%20%uB2E4%uB978%20%uB808%uC774%uC544%uC6C3%uC744%20%uCD94%uAC00%uD560%20%uC218%20%uC5C6%uC2B5%uB2C8%uB2E4.%20","plugin.layoutmanager.notselect":"%uC120%uD0DD%uB41C%20%uC601%uC5ED%uC774%20%uB808%uC774%uC544%uC6C3%uC774%20%uC544%uB2C8%uAC70%uB098%20%uC62C%uBC14%uB974%uAC8C%20%uC120%uD0DD%uB41C%20%uC601%uC5ED%uC774%20%uC5C6%uC2B5%uB2C8%uB2E4.\n\n%uB808%uC774%uC544%uC6C3%20%uC601%uC5ED%uC5D0%20%uCEE4%uC11C%uB97C%20%uC704%uCE58%20%uC2DC%uD0A4%uAC70%uB098%20%uB808%uC774%uC544%uC6C3%20%uC601%uC5ED%20%uC548%uC758%20%uAC1C%uCCB4%uB97C%20%uC120%uD0DD%uD558%uC5EC%20%uC8FC%uC138%uC694%21","plugin.layoutmanager.notselect2":"%uC120%uD0DD%uB41C%20%uB808%uC774%uC544%uC6C3%uC774%20%uC5C6%uC2B5%uB2C8%uB2E4.\n\n%uB808%uC774%uC544%uC6C3%uC744%20%uBA3C%uC800%20%uC120%uD0DD%uD558%uC5EC%20%uC8FC%uC2DC%uAE30%20%uBC14%uB78D%uB2C8%uB2E4.","plugin.layoutmanager.notexistfile":"%uB808%uC774%uC544%uC6C3%20%uD15C%uD50C%uB9BF%20%uB85C%uB529%uC774%20%uC2E4%uD328%uD558%uC600%uC2B5%uB2C8%uB2E4.","plugin.layoutmanager.nowrequesting":"%uD604%uC7AC%20%uB808%uC774%uC544%uC6C3%20%uD15C%uD50C%uB9BF%20%uD30C%uC77C%uC744%20%uB85C%uB529%uC911%uC785%uB2C8%uB2E4.\n\n%uC7A0%uC2DC%uB9CC%20%uAE30%uB2E4%uB824%20%uC8FC%uC2DC%uAE30%20%uBC14%uB78D%uB2C8%uB2E4."};var textNodes;function checkColor(a){var b=/^#?[0-9a-fA-F]{6}$/;return b.test(a);}function setCursorStyle(e,a,d){d.nr.cloneSelectedRange();var f=d.nr.createAndInsertNode("SPAN");f.innerHTML="&nbsp;";for(var c=0;c<e.length;c++){f.style[e[c]]=a[c];}if($Agent().IE){d.nr.doc.body.contentEditable=false;f.setAttribute("contentEditable",true);f.focus();var b=function(){d.nr.doc.body.contentEditable=true;f.setAttribute("contentEditable","false");f.removeAttribute("contentEditable");d.editor.getWindow().focus();}.bind(this);setTimeout(b,10);}else{d.nr.defineRange(f.firstChild);d.nr.select();return;}}function updateSelectedText(b,h,g){var e=g.nr;function c(m,k,n){var l;if(m.nodeType!=3){l=m;}else{if(m.parentNode.tagName=="SPAN"&&e.inRange(m.parentNode,false)){l=m.parentNode;}else{l=e.doc.createElement("SPAN");m.parentNode.insertBefore(l,m);l.appendChild(m);}}if(k=="fontFamily"&&/^\d+(_\d+)?$/.test(n)){n="'"+n+"'";}l.style[k]=n;}function f(k,l,q){function r(t,n){while(t&&t.tagName!=n){t=t.parentNode;}return t;}function p(v){var u=[];var w=0;function t(n){if(!n){return;}if(n.nodeType==3&&n.nodeValue!=""){u[w++]=n;}if(n.firstChild){t(n.firstChild);}if(n.nextSibling){t(n.nextSibling);}}t(v.firstChild);return u;}function o(n){var u=r(n,"LI");if(u){var t=p(u);if(!t||t.length==0||(k.has(t[0])&&k.has(t[t.length-1]))){k[k.length]=u;}}}var s=k.length;for(var m=0;m<s;m++){o(k[m]);}s=k.length;for(var m=0;m<s;m++){c(k[m],l,q);}}e.cloneSelectedRange();var a=e.getNodes();var d=a.filter(function(k){return(k.nodeType==3);});if(d.length!=0){f(d,b,h);}return a;}function fontProperty(b,c,e,d,a){this.fontId=b;this.fontName=c;this.defaultSize=e;this.fontURL=d;this.fontCSSURL=a;this.displayName=c;this.isLoaded=true;this.fontFamily=this.fontId;if(this.fontCSSURL!=""){this.displayName+=""+e;this.fontFamily+="_"+e;this.isLoaded=false;}this.loadCSS=function(g){if(this.isLoaded){return;}var f=g.styleSheets[0];f.addImport(this.fontCSSURL);this.isLoaded=true;};this.toStruct=function(){return{fontId:this.fontId,fontName:this.fontName,defaultSize:this.defaultSize,fontURL:this.fontURL,fontCSSURL:this.fontCSSURL};};}(function(){var a=null,b=/,/gi;IsInstalledFont=function(g){var c=g=="Comic Sans MS"?"Courier New":"Comic Sans MS";if(!a){a=document.createElement("div");}var h="position:absolute !important; font-size:200px !important; left:-9999px !important; top:-9999px !important;";a.innerHTML="mmmmiiiii"+unescape("%uD55C%uAE00");a.style.cssText=h+'font-family:"'+c+'" !important';var f=document.body||document.documentElement;if(f.firstChild){f.insertBefore(a,f.firstChild);}else{document.body.appendChild(a);}var d=a.offsetWidth+"-"+a.offsetHeight;a.style.cssText=h+'font-family:"'+g.replace(b,'","')+'", "'+c+'" !important';var e=d!=(a.offsetWidth+"-"+a.offsetHeight);document.body.removeChild(a);return e;};})();var fontNamePlugin=new (Class.extend(Editor.menuPlugin,{name:"fontname",range:null,_allFontList:[],_baseFontList:[],_defaultFontList:[],_tempSavedFontList:[],defaultFontList:[],getFontInUse:function(){var b=[];for(var a=0;a<this._allFontList.length;a++){if(this._allFontList[a].isLoaded&&this._allFontList[a].fontCSSURL!=""){b[b.length]=this._allFontList[a].toStruct();}}return b;},addFont:function(d,a,k,b,e,g,f,l){if(l&&!IsInstalledFont(d)){return null;}var h=new fontProperty(d,a,k,b,e);for(var c=0;c<this._allFontList.length;c++){if(h.fontFamily==this._allFontList[c].fontFamily){return this._allFontList[c];}}if(!g){this._baseFontList[this._baseFontList.length]=h;}else{if(g==1){this._defaultFontList[this._defaultFontList.length]=h;}else{this._tempSavedFontList[this._tempSavedFontList.length]=h;}}this.setAllFontList();return h;},addFontInUse:function(c,d,g,e,b,f){var a=this.addFont(c,d,g,e,b,f);a.loadCSS(this.editor.getDocument());return a;},setMainFont:function(fontId,fontName,defaultSize,fontURL,fontCSSURL,fontType){var newFont=this.addFontInUse(fontId,fontName,defaultSize,fontURL,fontCSSURL,fontType);with(this.editor.getDocument().body){style.fontFamily=newFont.fontFamily;style.fontSize=defaultSize+"pt";}return newFont;},resetTempSavedFontList:function(){this._tempSavedFontList=[];this.setAllFontList();},_addDefaultFonts:function(){if(this.defaultFontList.length<1){this.addFont(Editor._("plugin.font.dotum"),Editor._("plugin.font.dotum"),0,"","",1);this.addFont(Editor._("plugin.font.dotumche")+",DotumChe,AppleGothic",Editor._("plugin.font.dotumche"),0,"","",1);this.addFont(Editor._("plugin.font.gulim"),Editor._("plugin.font.gulim"),0,"","",1);this.addFont(Editor._("plugin.font.gulimche"),Editor._("plugin.font.gulimche"),0,"","",1);this.addFont(Editor._("plugin.font.batang")+",Batang,AppleMyungjo",Editor._("plugin.font.batang"),0,"","",1);this.addFont(Editor._("plugin.font.batangche"),Editor._("plugin.font.batangche"),0,"","",1);this.addFont(Editor._("plugin.font.gunseo")+",Gungsuh,GungSeo",Editor._("plugin.font.gunseo"),0,"","",1);this.addFont("Arial","Arial",0,"","",1);this.addFont("Tahoma","Tahoma",0,"","",1);this.addFont("Times New Roman","Times New Roman",0,"","",1);this.addFont("Verdana","Verdana",0,"","",1);var e=unescape("%uB098%uB214%uACE0%uB515");var d=e+",NanumGothic";var a=unescape("%uB098%uB214%uBA85%uC870");var c=a+",NanumMyeongjo";if(IsInstalledFont(d)){this.addFont("-----","-----",0,"","",1);this.addFont(d+","+Editor._("plugin.font.dotum"),e,0,"","",1);}if(IsInstalledFont(c)){this.addFont("-----","-----",0,"","",1);this.addFont(c+","+Editor._("plugin.font.dotum"),a,0,"","",1);}}else{for(var b=0;b<this.defaultFontList.length;b++){this.addFont(this.defaultFontList[b][0],this.defaultFontList[b][1],0,"","",1);}}},addDefaultFont:function(b,a){this.defaultFontList[this.defaultFontList.length]=[b,a];},onCreate:function(){$("fn_name_list").tabIndex=1;this._addDefaultFonts();this.oOptionList=$("fn_name_list");this.drawMenu();},setAllFontList:function(){this._allFontList=[];var b;for(var a=0;a<this._baseFontList.length;a++){this._allFontList[+a]=this._baseFontList[a];}b=this._allFontList.length;for(var a=0;a<this._tempSavedFontList.length;a++){this._allFontList[b+a]=this._tempSavedFontList[a];}b=this._allFontList.length;for(var a=0;a<this._defaultFontList.length;a++){this._allFontList[b+a]=this._defaultFontList[a];}},drawMenu:function(){removeAllChildren(this.oOptionList);for(var b=0,a;b<this._allFontList.length;b++){a=this.oOptionList.appendChild($C("LI"));if(this._allFontList[b].displayName=="-----"){a.className="line06";continue;}else{if($Agent().IE){a.style.height="14px";}}a.style.textAlign="left";a.innerHTML=this._allFontList[b].displayName;a.onmousedown=this.assignAction("fontname",b);try{a.style.cursor="pointer";}catch(c){a.style.cursor="hand";}a.onmouseover=function(){this.className="list_over";};a.onmouseout=function(){this.className="";};}this.object.style.width="140px";if(this._allFontList.length>20){$("fn_name_list").style.height="390px";$("fn_name_list").style.overflow="auto";}},setFocus:function(){try{window.focus();$("fn_name_list").focus();$("fn_name_list").blur();}catch(a){this.editor.getWindow().focus();setTimeout(this.setFocus.bind(this),10);}},onShow:function(){this.drawMenu();this.nr=new NodeRange(this.editor.getWindow(),this.editor.getDocument());if(this.nr.getType()=="table"){this.object.style.display="none";setTimeout(this.close.bind(this),100);alert(Editor._("plugin.font.notableeditor"));return;}if($Agent().OldIE){setTimeout(this.setFocus.bind(this),10);}},onClose:function(){},actFontname:function(a){if(!this.nr.range||this.nr.getType()=="control"||this.nr.getType()=="table"){this.close();return;}var b=[];setTimeout(function(c,f){this.editor.getWindow().focus();this.nr.select();c.loadCSS(this.editor.getDocument());f=updateSelectedText("fontFamily",c.fontFamily,this);if(c.defaultSize!=0){updateSelectedText("fontSize",c.defaultSize+"pt",this);}if(f.length==0){var h=["fontFamily"];var d=[c.fontFamily];if(c.defaultSize!=0){h.push("fontSize");d.push(c.defaultSize+"pt");}try{setCursorStyle(h,d,this);}catch(g){}return;}if(!$Agent().IE){this.nr.defineRange(b[0],b[b.length-1]);this.nr.select();}}.bind(this,this._allFontList[a],b),100);this.close();}}));fontSizePlugin=new (Class.extend(Editor.menuPlugin,{name:"fontsize",oOptionList:null,fontSizeList:[7,8,9,10,11,12,14,18,24,36],sSampleStrings:null,nr:null,range:null,onCreate:function(){$("fs_size_list").tabIndex=1;this.oOptionList=$("fs_size_list");this.sSampleStrings=[Editor._("plugin.font.ganadaramabasa"),Editor._("plugin.font.ganadaramabasa"),Editor._("plugin.font.ganadaramabasa"),Editor._("plugin.font.ganadaramabasa"),Editor._("plugin.font.ganadaramabasa"),Editor._("plugin.font.ganadaramabasa"),Editor._("plugin.font.ganadaramabasa"),Editor._("plugin.font.ganadaramabasa"),Editor._("plugin.font.ganadarama"),Editor._("plugin.font.ganada")];for(var a=0;a<this.fontSizeList.length;a++){li=this.oOptionList.appendChild($C("LI"));li.style.textAlign="left";li.innerHTML=this.sSampleStrings[a]+" ("+this.fontSizeList[a]+"pt)";li.onmousedown=this.assignAction("fontsize",this.fontSizeList[a]);try{li.style.cursor="pointer";}catch(b){li.style.cursor="hand";}li.style.fontSize=this.fontSizeList[a]+"pt";li.onmouseover=function(){this.className="list_over";};li.onmouseout=function(){this.className="";};}},setFocus:function(){try{window.focus();$("fs_size_list").focus();$("fs_size_list").blur();}catch(a){setTimeout(this.setFocus.bind(this),10);}},onShow:function(){this.nr=new NodeRange(this.editor.getWindow(),this.editor.getDocument());if(this.nr.getType()=="table"){this.object.style.display="none";setTimeout(this.close.bind(this),100);alert(Editor._("plugin.font.notableeditor"));return;}if($Agent().OldIE){setTimeout(this.setFocus.bind(this),10);}},onClose:function(){},actFontsize:function(b){if(!this.nr.range||this.nr.getType()=="control"||this.nr.getType()=="table"){this.close();return;}var a=[];setTimeout(function(d,c){this.editor.getWindow().focus();this.nr.select();var c=updateSelectedText("fontSize",d+"pt",this);if(c.length==0){try{setCursorStyle(["fontSize"],[d+"pt"],this);}catch(f){}return;}if(!$Agent().OldIE){this.nr.defineRange(c[0],c[c.length-1]);this.nr.select();}}.bind(this,b,a),100);this.close();}}));var fontColorPlugin=new (Class.extend(Editor.menuPlugin,{name:"fontcolor",author:"gunpyo",description:"change font color",range:null,cpCreated:false,init:function(){$("fc_txt_color").style.backgroundColor="#000000";$("fc_txt_colorCode").value="#000000";$("fc_div_cp").style.display="none";},onCreate:function(){$("fc_color_tbl").tabIndex=1;var c;var b;$("fc_bt_cp_ok").onmousedown=this.assignAction("fontcolor","");$("fc_bt_cp_more").onclick=function(){var e=$("fc_div_cp").style.display;if(e=="none"){$("fc_div_cp").style.display="block";if(this.cpCreated){this.cpp.setHSV(0,100,100);}else{this.cpCreated=true;this.cpp=new Ku.Colorpicker("fc_cp",{onChange:function(k){$("fc_txt_color").style.backgroundColor="#"+k;$("fc_txt_colorCode").value="#"+k;}});}}else{$("fc_div_cp").style.display="none";}}.bind(this);$("fc_bt_cp_less").onclick=$("fc_bt_cp_more").onclick;try{$("fc_bt_cp_less").style.cursor="pointer";}catch(h){$("fc_bt_cp_less").style.cursor="hand";}try{$("fc_bt_cp_more").style.cursor="pointer";}catch(h){$("fc_bt_cp_more").style.cursor="hand";}var a=new wrapperTable("fc_color_tbl");var f=a.getCells();var g;for(var d=0;d<f.length;d++){cell=f[d];g=cell.bgColor;if(g!=""){cell.onmousedown=this.setFontColorFromList.bind(this,g);try{cell.style.cursor="pointer";}catch(h){cell.style.cursor="hand";}}}},setFocus:function(){try{window.focus();$("fc_color_tbl").focus();$("fc_color_tbl").blur();}catch(a){setTimeout(this.setFocus.bind(this),10);}},onShow:function(){var a=this.editor.getSelection();var b=a.getRange();if(a.type!="control"){if(b.duplicate){this.range=b.duplicate();}else{this.range=b.cloneRange();}}if($Agent().OldIE){setTimeout(this.setFocus.bind(this),10);}},onClose:function(){this.init();},actFontcolor:function(){var a=$("fc_txt_colorCode").value;if(!checkColor(a)){alert(Editor._("plugin.fontcolor.checkcolor"));return;}var b=this.editor.getSelection();if(b.type=="control"){this.close();return;}setTimeout(function(c){this.editor.getWindow().focus();this.editor.getSelection().setRange(this.range);this.editor._execCommand("ForeColor",c);}.bind(this,a),100);this.close();},setFontColorFromList:function(a){$("fc_txt_colorCode").value=a;this.actFontcolor();}}));var fontBackgroundColorPlugin=new (Class.extend(Editor.menuPlugin,{name:"fontbackgroundcolor",author:"gunpyo",description:"change the background color",range:null,cpCreated:false,cpp:null,init:function(){$("fbgc_txt_color").style.backgroundColor="#FFFFFF";$("fbgc_txt_colorCode").value="#FFFFFF";$("fbgc_div_cp").style.display="none";},onCreate:function(){$("fbgc_color_tbl").tabIndex=1;var b;$("fbgc_bt_cp_ok").onmousedown=this.assignAction("fontbackgroundcolor","");$("fbgc_bt_cp_more").onclick=function(){var e=$("fbgc_div_cp").style.display;if(e=="none"){$("fbgc_div_cp").style.display="block";if(this.cpCreated){this.cpp.setHSV(0,100,100);}else{this.cpCreated=true;this.cpp=new Ku.Colorpicker("fbgc_cp",{onChange:function(k){$("fbgc_txt_color").style.backgroundColor="#"+k;$("fbgc_txt_colorCode").value="#"+k;}});}}else{$("fbgc_div_cp").style.display="none";}}.bind(this);$("fbgc_bt_cp_less").onclick=$("fbgc_bt_cp_more").onclick;try{$("fbgc_bt_cp_less").style.cursor="pointer";}catch(g){$("fbgc_bt_cp_less").style.cursor="hand";}try{$("fbgc_bt_cp_more").style.cursor="pointer";}catch(g){$("fbgc_bt_cp_more").style.cursor="hand";}var a=new wrapperTable("fbgc_color_tbl");var h=new wrapperTable("fbgc_list_tbl");var d=new Array();d=d.concat([].load(a.getCells()),[].load(h.getCells()));var f;for(var c=0;c<d.length;c++){cell=d[c];f=cell.bgColor;fontColor=cell.style.color;if(f!=""){cell.onmousedown=this.setFontColorFromList.bind(this,f,fontColor);try{cell.style.cursor="pointer";}catch(g){cell.style.cursor="hand";}}}var a=new wrapperTable("fbgc_color_tbl");var d=a.getCells();var f;for(var c=0;c<d.length;c++){cell=d[c];f=cell.bgColor;if(f!=""){cell.onmousedown=this.setFontColorFromList.bind(this,f);try{cell.style.cursor="pointer";}catch(g){cell.style.cursor="hand";}}}},setFocus:function(){try{window.focus();$("fbgc_color_tbl").focus();$("fbgc_color_tbl").blur();}catch(a){setTimeout(this.setFocus.bind(this),10);}},onShow:function(){var a=this.editor.getSelection();var b=a.getRange();if(a.type!="control"){if(b.duplicate){this.range=b.duplicate();}else{this.range=b.cloneRange();}}if($Agent().OldIE){setTimeout(this.setFocus.bind(this),10);}},onClose:function(){this.init();},actFontbackgroundcolor:function(b){var a=$("fbgc_txt_colorCode").value;if(!checkColor(a)){alert(Editor._("plugin.fontbackgroundcolor.checkcolor"));return;}var c=this.editor.getSelection();if(c.type=="control"){this.close();return;}setTimeout(function(d,e){this.editor.getWindow().focus();this.editor.getSelection().setRange(this.range);this.editor._execCommand("hiliteColor",d);if(e){this.editor._execCommand("ForeColor",e);}}.bind(this,a,b),100);this.close();},setFontColorFromList:function(a,b){$("fbgc_txt_colorCode").value=a;this.actFontbackgroundcolor(b);}}));Editor.registerPlugin(fontNamePlugin);Editor.registerPlugin(fontSizePlugin);Editor.registerPlugin(fontColorPlugin);Editor.registerPlugin(fontBackgroundColorPlugin);function removeAllChildren(a){while(a.childNodes.length>=1){a.removeChild(a.firstChild);}}function pageLink(d,a,b,c){this.placeHolder=document.getElementById(d);this.iCurrentPage=a;this.iTotalPages=b;this.funcCustomAction=c;this.funcAction=function(e){this.iCurrentPage=e;this.draw();this.funcCustomAction(e);};this.draw=function(){removeAllChildren(this.placeHolder);for(var f=1;f<=this.iTotalPages;f++){var l=document.createElement("TD");var g=document.createElement("A");var k=document.createTextNode(f);g.appendChild(k);l.appendChild(g);if(f==this.iCurrentPage){l.className="paging_on";}l.onclick=this.funcAction.bind(this,f);try{l.style.cursor="pointer";}catch(h){l.style.cursor="hand";}this.placeHolder.appendChild(l);}l.className=l.className+" pgR";};this.draw();}function getType(d){var b=typeof(d);if(b=="object"){b="@anonymous";if(d.constructor){var e=d.constructor.toString();var a=e.indexOf(" ")+1;var c=e.indexOf("(")-a;b=e.substr(a,c);if(a==0||b==""){b="@anonymous";}}}return b;}Array.prototype.subarray=function(e,d){if(e>d){var b;b=e;e=d;d=b;}if(!d||d>this.length){d=this.length;}var a=new Array();if(e>this.length||e<0){return a;}for(var c=e;c<d;c++){a[c-e]=this[c];}return a;};function removeAllChildren(a){while(a.childNodes.length>=1){a.removeChild(a.firstChild);}}function placeWrapper(b,a){var c;if(b.tagName==a){c=b;}else{c=document.createElement(a);if(b.tagName=="DIV"){b.appendChild(c);}else{b.parentNode.insertBefore(c,b);b.style.display="none";}}return c;}function wrapperUL(c){var b=document.getElementById(c);var a;a=placeWrapper(b,"UL");this.setLi=function(d,e){if(e.tagName&&e.tagName=="LI"){return e;}if(getType(e)=="string"){d.innerHTML=e;}else{removeAllChildren(d);d.appendChild(e);}return d;};this.addItemNonArray=function(d){var e;e=document.createElement("LI");e=this.setLi(e,d);a.appendChild(e);return e;};this.addItemArray=function(f){var d=f.length;for(var e=0;e<d;e++){this.addItemNonArray(f[e]);}return f[f.length-1];};this.setItemAt=function(d,e){var f=a.childNodes.item(d);this.setLi(f,e);};this.addItem=function(e){var d;if(getType(e)=="Array"){d=this.addItemArray(e);}else{d=this.addItemNonArray(e);}return d;};this.removeItem=function(d){if(!d){return;}if(d.tagName&&d.tagName=="LI"){a.removeChild(d);}else{a.removeChild(a.childNodes.item(d));}};this._o=a;}function wrapperSelect(c){var b=document.getElementById(c);var a;a=placeWrapper(b,"SELECT");this.addOptionArray=function(f){var g;var d=f.length;for(var e=0;e<d;e++){g=document.createElement("OPTION");g.innerHTML=f[e];a.appendChild(g);}};this.addOptionNonArray=function(d){var e=new Array;e[0]=d;this.addOptionArray(e);};this.addOption=function(d){if(getType(d)=="Array"){this.addOptionArray(d);}else{this.addOptionNonArray(d);}};this._o=a;}function wrapperTable(f){var e=document.getElementById(f);var a;var c;var b=1;var d=1;a=placeWrapper(e,"TABLE");e=e.getElementsByTagName("TBODY");if(!e||!e[0]){c=document.createElement("TBODY");a.appendChild(c);}else{c=e[0];}this.getCells=function(){return a.getElementsByTagName("td");};this.removeCells=function(){if(a.hasChildNodes()){var h=a.childNodes.length;for(i=h-1;i>-1;i--){var g=a.childNodes[i];a.removeChild(g);}}};this.createCells=function(){var g;var h;for(var k=0;k<d;k++){g=document.createElement("TR");for(var l=0;l<b;l++){h=document.createElement("TD");h.innerHTML="&nbsp";g.appendChild(h);}c.appendChild(g);}};this.createCellsWithColumnFilling=function(g){if(!g||getType(g)!="Array"){return false;}this.setNumColumns(g.length);this.setNumRows(1);this.createCells();this.fill(g);};this.createCellsWithRowFilling=function(g){if(!g||getType(g)!="Array"){return false;}this.setNumColumns(1);this.setNumRows(g.length);this.createCells();this.fill(g);};this.fillIn=function(g,h){if(getType(h)=="string"){g.innerHTML=h;}else{g.innerHTML="";g.appendChild(h);}};this.fillArray=function(l){var h=this.getCells();var g=Math.min(h.length,l.length);for(var k=0;k<g;k++){this.fillIn(h[k],l[k]);}};this.fillNonArray=function(l){var h=this.getCells();var g=h.length;for(var k=0;k<g;k++){this.fillIn(h[k],l);}};this.fill=function(g){if(getType(g)=="Array"){this.fillArray(g);}else{this.fillNonArray(g);}};this.setNumColumns=function(g){b=g;};this.setNumRows=function(g){d=g;};this._o=a;}var scharinsertionPlugin=new (Class.extend(Editor.menuPlugin,{name:"scharinsertion",author:"gunpyo",modal:false,ROW_LENGTH:20,TABLE_HEIGHT:9,CurrentCharSet:0,CurrentChars:new Array(),charSet:new Array(),charSetLabel:new Array(),oTextField:Object(),__init:function(){this.charSet[0]=unescape("%uFF5B %uFF5D %u3014 %u3015 %u3008 %u3009 %u300A %u300B %u300C %u300D %u300E %u300F %u3010 %u3011 %u2018 %u2019 %u201C %u201D %u3001 %u3002 %B7 %u2025 %u2026 %A7 %u203B %u2606 %u2605 %u25CB %u25CF %u25CE %u25C7 %u25C6 %u25A1 %u25A0 %u25B3 %u25B2 %u25BD %u25BC %u25C1 %u25C0 %u25B7 %u25B6 %u2664 %u2660 %u2661 %u2665 %u2667 %u2663 %u2299 %u25C8 %u25A3 %u25D0 %u25D1 %u2592 %u25A4 %u25A5 %u25A8 %u25A7 %u25A6 %u25A9 %B1 %D7 %F7 %u2260 %u2264 %u2265 %u221E %u2234 %B0 %u2032 %u2033 %u2220 %u22A5 %u2312 %u2202 %u2261 %u2252 %u226A %u226B %u221A %u223D %u221D %u2235 %u222B %u222C %u2208 %u220B %u2286 %u2287 %u2282 %u2283 %u222A %u2229 %u2227 %u2228 %uFFE2 %u21D2 %u21D4 %u2200 %u2203 %B4 %uFF5E %u02C7 %u02D8 %u02DD %u02DA %u02D9 %B8 %u02DB %A1 %BF %u02D0 %u222E %u2211 %u220F %u266D %u2669 %u266A %u266C %u327F %u2192 %u2190 %u2191 %u2193 %u2194 %u2195 %u2197 %u2199 %u2196 %u2198 %u321C %u2116 %u33C7 %u2122 %u33C2 %u33D8 %u2121 %u2668 %u260F %u260E %u261C %u261E %B6 %u2020 %u2021 %AE %AA %BA %u2642 %u2640").split(" ");this.charSet[1]=unescape("%BD %u2153 %u2154 %BC %BE %u215B %u215C %u215D %u215E %B9 %B2 %B3 %u2074 %u207F %u2081 %u2082 %u2083 %u2084 %u2160 %u2161 %u2162 %u2163 %u2164 %u2165 %u2166 %u2167 %u2168 %u2169 %u2170 %u2171 %u2172 %u2173 %u2174 %u2175 %u2176 %u2177 %u2178 %u2179 %uFFE6 %24 %uFFE5 %uFFE1 %u20AC %u2103 %u212B %u2109 %uFFE0 %A4 %u2030 %u3395 %u3396 %u3397 %u2113 %u3398 %u33C4 %u33A3 %u33A4 %u33A5 %u33A6 %u3399 %u339A %u339B %u339C %u339D %u339E %u339F %u33A0 %u33A1 %u33A2 %u33CA %u338D %u338E %u338F %u33CF %u3388 %u3389 %u33C8 %u33A7 %u33A8 %u33B0 %u33B1 %u33B2 %u33B3 %u33B4 %u33B5 %u33B6 %u33B7 %u33B8 %u33B9 %u3380 %u3381 %u3382 %u3383 %u3384 %u33BA %u33BB %u33BC %u33BD %u33BE %u33BF %u3390 %u3391 %u3392 %u3393 %u3394 %u2126 %u33C0 %u33C1 %u338A %u338B %u338C %u33D6 %u33C5 %u33AD %u33AE %u33AF %u33DB %u33A9 %u33AA %u33AB %u33AC %u33DD %u33D0 %u33D3 %u33C3 %u33C9 %u33DC %u33C6").split(" ");this.charSet[2]=unescape("%u3260 %u3261 %u3262 %u3263 %u3264 %u3265 %u3266 %u3267 %u3268 %u3269 %u326A %u326B %u326C %u326D %u326E %u326F %u3270 %u3271 %u3272 %u3273 %u3274 %u3275 %u3276 %u3277 %u3278 %u3279 %u327A %u327B %u24D0 %u24D1 %u24D2 %u24D3 %u24D4 %u24D5 %u24D6 %u24D7 %u24D8 %u24D9 %u24DA %u24DB %u24DC %u24DD %u24DE %u24DF %u24E0 %u24E1 %u24E2 %u24E3 %u24E4 %u24E5 %u24E6 %u24E7 %u24E8 %u24E9 %u2460 %u2461 %u2462 %u2463 %u2464 %u2465 %u2466 %u2467 %u2468 %u2469 %u246A %u246B %u246C %u246D %u246E %u3200 %u3201 %u3202 %u3203 %u3204 %u3205 %u3206 %u3207 %u3208 %u3209 %u320A %u320B %u320C %u320D %u320E %u320F %u3210 %u3211 %u3212 %u3213 %u3214 %u3215 %u3216 %u3217 %u3218 %u3219 %u321A %u321B %u249C %u249D %u249E %u249F %u24A0 %u24A1 %u24A2 %u24A3 %u24A4 %u24A5 %u24A6 %u24A7 %u24A8 %u24A9 %u24AA %u24AB %u24AC %u24AD %u24AE %u24AF %u24B0 %u24B1 %u24B2 %u24B3 %u24B4 %u24B5 %u2474 %u2475 %u2476 %u2477 %u2478 %u2479 %u247A %u247B %u247C %u247D %u247E %u247F %u2480 %u2481 %u2482").split(" ");this.charSet[3]=unescape("%u3131 %u3132 %u3133 %u3134 %u3135 %u3136 %u3137 %u3138 %u3139 %u313A %u313B %u313C %u313D %u313E %u313F %u3140 %u3141 %u3142 %u3143 %u3144 %u3145 %u3146 %u3147 %u3148 %u3149 %u314A %u314B %u314C %u314D %u314E %u314F %u3150 %u3151 %u3152 %u3153 %u3154 %u3155 %u3156 %u3157 %u3158 %u3159 %u315A %u315B %u315C %u315D %u315E %u315F %u3160 %u3161 %u3162 %u3163 %u3165 %u3166 %u3167 %u3168 %u3169 %u316A %u316B %u316C %u316D %u316E %u316F %u3170 %u3171 %u3172 %u3173 %u3174 %u3175 %u3176 %u3177 %u3178 %u3179 %u317A %u317B %u317C %u317D %u317E %u317F %u3180 %u3181 %u3182 %u3183 %u3184 %u3185 %u3186 %u3187 %u3188 %u3189 %u318A %u318B %u318C %u318D %u318E").split(" ");this.charSet[4]=unescape("%u0391 %u0392 %u0393 %u0394 %u0395 %u0396 %u0397 %u0398 %u0399 %u039A %u039B %u039C %u039D %u039E %u039F %u03A0 %u03A1 %u03A3 %u03A4 %u03A5 %u03A6 %u03A7 %u03A8 %u03A9 %u03B1 %u03B2 %u03B3 %u03B4 %u03B5 %u03B6 %u03B7 %u03B8 %u03B9 %u03BA %u03BB %u03BC %u03BD %u03BE %u03BF %u03C0 %u03C1 %u03C3 %u03C4 %u03C5 %u03C6 %u03C7 %u03C8 %u03C9 %C6 %D0 %u0126 %u0132 %u013F %u0141 %D8 %u0152 %DE %u0166 %u014A %E6 %u0111 %F0 %u0127 I %u0133 %u0138 %u0140 %u0142 %u0142 %u0153 %DF %FE %u0167 %u014B %u0149 %u0411 %u0413 %u0414 %u0401 %u0416 %u0417 %u0418 %u0419 %u041B %u041F %u0426 %u0427 %u0428 %u0429 %u042A %u042B %u042C %u042D %u042E %u042F %u0431 %u0432 %u0433 %u0434 %u0451 %u0436 %u0437 %u0438 %u0439 %u043B %u043F %u0444 %u0446 %u0447 %u0448 %u0449 %u044A %u044B %u044C %u044D %u044E %u044F").split(" ");this.charSet[5]=unescape("%u3041 %u3042 %u3043 %u3044 %u3045 %u3046 %u3047 %u3048 %u3049 %u304A %u304B %u304C %u304D %u304E %u304F %u3050 %u3051 %u3052 %u3053 %u3054 %u3055 %u3056 %u3057 %u3058 %u3059 %u305A %u305B %u305C %u305D %u305E %u305F %u3060 %u3061 %u3062 %u3063 %u3064 %u3065 %u3066 %u3067 %u3068 %u3069 %u306A %u306B %u306C %u306D %u306E %u306F %u3070 %u3071 %u3072 %u3073 %u3074 %u3075 %u3076 %u3077 %u3078 %u3079 %u307A %u307B %u307C %u307D %u307E %u307F %u3080 %u3081 %u3082 %u3083 %u3084 %u3085 %u3086 %u3087 %u3088 %u3089 %u308A %u308B %u308C %u308D %u308E %u308F %u3090 %u3091 %u3092 %u3093 %u30A1 %u30A2 %u30A3 %u30A4 %u30A5 %u30A6 %u30A7 %u30A8 %u30A9 %u30AA %u30AB %u30AC %u30AD %u30AE %u30AF %u30B0 %u30B1 %u30B2 %u30B3 %u30B4 %u30B5 %u30B6 %u30B7 %u30B8 %u30B9 %u30BA %u30BB %u30BC %u30BD %u30BE %u30BF %u30C0 %u30C1 %u30C2 %u30C3 %u30C4 %u30C5 %u30C6 %u30C7 %u30C8 %u30C9 %u30CA %u30CB %u30CC %u30CD %u30CE %u30CF %u30D0 %u30D1 %u30D2 %u30D3 %u30D4 %u30D5 %u30D6 %u30D7 %u30D8 %u30D9 %u30DA %u30DB %u30DC %u30DD %u30DE %u30DF %u30E0 %u30E1 %u30E2 %u30E3 %u30E4 %u30E5 %u30E6 %u30E7 %u30E8 %u30E9 %u30EA %u30EB %u30EC %u30ED %u30EE %u30EF %u30F0 %u30F1 %u30F2 %u30F3 %u30F4 %u30F5 %u30F6").split(" ");},onShow:function(){var a=this.editor.getSelection();if(a.type!="control"){var b=a.getRange();if(b.duplicate){this.range=b.duplicate();}else{this.range=b.cloneRange();}}$("charTable").focus();},onClose:function(){this.oTextField.value="";},actClose:function(){this.close();},actInsertschar:function(){var b=this.editor;var a=this.oTextField.value;if(a!=""){this.editor.getWindow().focus();var c=this.editor.getSelection();this.editor.getSelection().setRange(this.range);if(c.type=="control"){this.nr=new NodeRange(this.editor.getWindow(),this.editor.getDocument());this.nr.cloneSelectedRange();}b._execCommand("insertHTML",a);}this.close();},appendText:function(a){this.oTextField.value+=this.CurrentChars[a].firstChild.nodeValue;this.oTextField.disabled=false;this.oTextField.focus();this.oTextField.value=this.oTextField.value;setTimeout(function(){this.oTextField.disabled=true;}.bind(this),10);},toTxtDiv:function(a){var a=document.createTextNode(a);var b=document.createElement("DIV");b.onmouseover=function(){this.className="code_over";};b.onmouseout=function(){this.className="code_off";};b.appendChild(a);b.align="center";return b;},drawCharTable:function(b,d){var g,a;this.CurrentCharSet=d;this.CurrentChars=this.charSet[d].map(this.toTxtDiv);b.fill("&nbsp");b.fill(this.CurrentChars);g=b.getCells();for(var f=0;f<g.length;f++){a=g[f];if(a.innerHTML!="&nbsp;"){a.onclick=this.appendText.bind(this,f);try{a.style.cursor="pointer";}catch(h){a.style.cursor="hand";}}else{a.onclick=null;a.onmouseover=null;a.onmouseout=null;a.style.cursor="";}}for(var f=1;f<this.charSetLabel.length+1;f++){var c=$("cset"+f);c.onclick=scharinsertionPlugin.drawCharTable.bind(this,b,f-1);try{c.style.cursor="pointer";}catch(h){c.style.cursor="hand";}if((f-1)==this.CurrentCharSet){c.className="this_on";}else{c.className="";}}},onCreate:function(){var a=new wrapperTable("charTable");this.oTextField=$("specialChar");var b=1;while(lbl=$("cset"+b)){this.charSetLabel[b++-1]=lbl.innerHTML;}a.setNumColumns(this.ROW_LENGTH);a.setNumRows(this.TABLE_HEIGHT);a.createCells();this.drawCharTable(a,0);this.oTextField.disabled=true;}}));Editor.registerPlugin(scharinsertionPlugin);var emoticoninsertionPlugin=new (Class.extend(Editor.menuPlugin,{name:"emoticoninsertion",author:"gunpyo",modal:false,IMG_BASE_URL:"",ROW_LENGTH:10,TABLE_HEIGHT:5,CurrentEmoticonSet:0,CurrentEmoticons:new Array(),emoticonSet:new Array(),emoticonSetLabel:new Array(),oTextField:Object(),nr:null,__init:function(){this.IMG_BASE_URL="http://blogimgs.naver.com/nblog/mylog/post/emoticon/";this.emoticonSet[0]=("1_01.gif 1_02.gif 1_03.gif 1_04.gif 1_05.gif 1_06.gif 1_07.gif 1_08.gif 1_09.gif 1_10.gif 1_11.gif 1_12.gif 1_13.gif 1_14.gif 1_15.gif 1_16.gif 1_17.gif 1_18.gif 1_19.gif 1_20.gif 1_21.gif 1_22.gif 1_23.gif 1_24.gif 1_25.gif 1_26.gif 1_27.gif 1_28.gif 1_29.gif 1_30.gif 1_31.gif 1_32.gif 1_33.gif 1_34.gif 1_35.gif 1_36.gif 1_37.gif 1_38.gif 1_39.gif 1_40.gif 1_41.gif 1_42.gif 1_43.gif 1_44.gif 1_45.gif 1_46.gif 1_47.gif 1_48.gif 1_49.gif 1_50.gif").split(" ");this.emoticonSet[1]=("2_01.gif 2_02.gif 2_03.gif 2_04.gif 2_05.gif 2_06.gif 2_07.gif 2_08.gif 2_09.gif 2_10.gif 2_11.gif 2_12.gif 2_13.gif 2_14.gif 2_15.gif 2_16.gif 2_17.gif 2_18.gif 2_19.gif 2_20.gif 2_21.gif 2_22.gif 2_23.gif 2_24.gif 2_25.gif 2_26.gif 2_27.gif 2_28.gif 2_29.gif 2_30.gif 2_31.gif 2_32.gif 2_33.gif 2_34.gif 2_35.gif 2_36.gif 2_37.gif 2_38.gif 2_39.gif 2_40.gif 2_41.gif 2_42.gif 2_43.gif 2_44.gif 2_45.gif 2_46.gif 2_47.gif 2_48.gif 2_49.gif 2_50.gif").split(" ");this.emoticonSet[2]=("3_01.gif 3_02.gif 3_03.gif 3_04.gif 3_05.gif 3_06.gif 3_07.gif 3_08.gif 3_09.gif 3_10.gif 3_11.gif 3_12.gif 3_13.gif 3_14.gif 3_15.gif 3_16.gif 3_17.gif 3_18.gif 3_19.gif 3_20.gif 3_21.gif 3_22.gif 3_23.gif 3_24.gif 3_25.gif 3_26.gif 3_27.gif 3_28.gif 3_29.gif 3_30.gif 3_31.gif 3_32.gif 3_33.gif 3_34.gif 3_35.gif 3_36.gif 3_37.gif 3_38.gif 3_39.gif 3_40.gif 3_41.gif 3_42.gif 3_43.gif 3_44.gif 3_45.gif 3_46.gif 3_47.gif 3_48.gif").split(" ");this.emoticonSet[3]=("4_01.gif 4_02.gif 4_03.gif 4_04.gif 4_05.gif 4_06.gif 4_07.gif 4_08.gif 4_09.gif 4_10.gif 4_11.gif 4_12.gif 4_13.gif 4_14.gif 4_15.gif 4_16.gif 4_17.gif 4_18.gif 4_19.gif 4_20.gif 4_21.gif 4_22.gif 4_23.gif 4_24.gif 4_25.gif 4_26.gif 4_27.gif 4_28.gif 4_29.gif 4_30.gif 4_31.gif 4_32.gif 4_33.gif 4_34.gif 4_35.gif 4_36.gif 4_37.gif 4_38.gif 4_39.gif 4_40.gif 4_41.gif 4_42.gif").split(" ");this.emoticonSet[4]=("5_01.gif 5_02.gif 5_03.gif 5_04.gif 5_05.gif 5_06.gif 5_07.gif 5_08.gif 5_09.gif 5_10.gif 5_11.gif 5_12.gif 5_13.gif 5_14.gif 5_15.gif 5_16.gif 5_17.gif 5_18.gif 5_19.gif 5_20.gif 5_21.gif 5_22.gif 5_23.gif 5_24.gif 5_25.gif 5_26.gif 5_27.gif 5_28.gif 5_29.gif 5_30.gif 5_31.gif 5_32.gif 5_33.gif 5_34.gif 5_35.gif 5_36.gif 5_37.gif 5_38.gif 5_39.gif 5_40.gif 5_41.gif 5_42.gif 5_43.gif 5_44.gif 5_45.gif 5_46.gif 5_47.gif 5_48.gif 5_49.gif 5_50.gif").split(" ");},onShow:function(){this.nr=new NodeRange(this.editor.getWindow(),this.editor.getDocument());var a=this.editor.getSelection();if(a.type!="control"){var b=a.getRange();if(b.duplicate){this.range=b.duplicate();}else{this.range=b.cloneRange();}}this.editor.lockFocus();},onClose:function(){},actClose:function(){this.close();},applyEmoticon:function(a){setTimeout(function(c){this.editor.getWindow().focus();var f=this.editor.getSelection();var b=this.editor.getContent();var d=0;var e=new RegExp(this.IMG_BASE_URL,"gi");b.replace(e,function(g){d++;return g;});if(d>=100){alert(Editor._("plugin.tabledlist.maxemoticon"));this.close();return 0;}if(f.type=="control"){this.nr=new NodeRange(this.editor.getWindow(),this.editor.getDocument());this.nr.cloneSelectedRange();}if($Agent().IE){this.editor.getSelection().setRange(this.range);}this.editor._execCommand("insertHTML","<img src="+this.CurrentEmoticons[c].firstChild.src+' nhn_extra_image="true">');}.bind(this,a),100);this.close();},toImgDiv:function(a){var b=document.createElement("IMG");b.src=emoticoninsertionPlugin.IMG_BASE_URL+a;b.height=19;b.width=19;var c=document.createElement("DIV");c.onmouseover=function(){this.className="code_over";};c.onmouseout=function(){this.className="code_off";};c.appendChild(b);c.align="center";return c;},drawEmoticonTable:function(f,h){var d,a;this.CurrentEmoticonSet=h;this.CurrentEmoticons=this.emoticonSet[h].map(this.toImgDiv);f.fill("&nbsp");f.fill(this.CurrentEmoticons);d=f.getCells();for(var c=0;c<d.length;c++){a=d[c];if(a.innerHTML!="&nbsp;"){a.onclick=this.applyEmoticon.bind(this,c);try{a.style.cursor="pointer";}catch(g){a.style.cursor="hand";}}else{a.onclick=null;a.onmouseover=null;a.onmouseout=null;a.style.cursor="";}}for(var c=1;c<this.emoticonSetLabel.length+1;c++){var b=$("eset"+c);b.onclick=emoticoninsertionPlugin.drawEmoticonTable.bind(this,f,c-1);try{b.style.cursor="pointer";}catch(g){b.style.cursor="hand";}if((c-1)==this.CurrentEmoticonSet){b.className="this_on";}else{b.className="";}}},onCreate:function(){var b=new wrapperTable("emoTable");var a=1;while(lbl=$("eset"+a)){this.emoticonSetLabel[a++-1]=lbl.innerHTML;}b.setNumColumns(this.ROW_LENGTH);b.setNumRows(this.TABLE_HEIGHT);b.createCells();this.drawEmoticonTable(b,0);}}));Editor.registerPlugin(emoticoninsertionPlugin);var hyperlinkPlugin=new (Class.extend(Editor.menuPlugin,{name:"hyperlink",author:"gunpyo",bPreserveSelection:false,oLink:Object,oLinkSelPrefix:Object,linkExists:false,nr:null,onCreate:function(){this.oLink=$("hlnk_txt_url");this.oLink.onkeypress=function(c){var a=c.keyCode||c.which;var b=c.srcElement||c.target;if(a==13){setTimeout(function(){this.actLink();}.bind(this),10);}}.bindForEvent(this);},setFocus:function(){try{$("hlnk_txt_url").focus();$("hlnk_txt_url").value=$("hlnk_txt_url").value;}catch(a){setTimeout(this.setFocus.bind(this),10);}},onShow:function(){this.nr=new NodeRange(this.editor.getWindow(),this.editor.getDocument());if(this.nr.getType()=="table"){this.object.style.display="none";setTimeout(this.close.bind(this),10);alert(Editor._("plugin.font.notableeditor"));return;}var a=this.nr.getNodes();for(var c=0;c<a.length;c++){try{if(a[c].tagName=="IMG"&&a[c].className=="storyphoto_layout"){this.object.style.display="none";setTimeout(this.close.bind(this),10);alert(Editor._("plugin.hyperlink.nolink4storyphoto"));return;}}catch(f){}}linkExists=false;var b=this.nr.findContainer("A");var d;try{d=this.editor.getSelection();}catch(f){}if(b&&typeof(d)!="undefined"){if(typeof(b.textContent)!="undefined"&&b.textContent==""&&d.type!="control"){this.nr.range.setStartBefore(b);this.nr.range.setEndBefore(b);b.parentNode.removeChild(b);}else{linkExists=true;this.nr.defineRange(b);this.nr.select();this.oLink.value=b.href;}}setTimeout(this.setFocus.bind(this),10);},onClose:function(){this.oLink.value="http://";},actClose:function(){this.close();},actLink:function(){var a=this.oLink.value;if(!(/^(http|https|ftp|mailto):(?:\/\/)?((\w|-)+(?:[\.:@](\w|-))+)(?:\/|@)?([^"\?]*?)(?:\?([^\?"]*?))?$/.test(a))){alert(Editor._("plugin.hyperlink.invalidurl"));this.oLink.focus();this.oLink.select();return false;}this.nr.select();if(!linkExists&&this.nr.isCollapsed()){this.editor._execCommand("insertHTML",'<a href="'+a+'">'+a+"</a>");}else{if(a==""){this.editor._execCommand("unlink");}else{this.editor._execCommand("createlink",a);}}this.close();}}));Editor.registerPlugin(hyperlinkPlugin);var hotkey_hyperlink=function(c,a,b){c.execCommand("hyperlink",null);};Editor.registerHotkey("Ctrl+K",hotkey_hyperlink);function isChildOf(b,a){while(b&&b.tagName!="BODY"){if(b==a){return true;}b=b.parentNode;}return false;}var lineHeightPlugin=new (Class.extend(Editor.menuPlugin,{name:"lineheight",author:"gunpyo",oOptionList:null,heightList:[50,80,100,120,150,180,200],sel:null,nr:null,lineBreakers:{},heightBreakers:{},onCreate:function(){this.lineBreakers={DIV:true,P:true,UL:true,OL:true,LI:true,TD:true,TR:true,TH:true,BLOCKQUOTE:true,BODY:true,TABLE:true};this.heightBreakers=this.lineBreakers;this.sel=this.editor.getSelection();this.oOptionList=$("lh_height_list");for(var a=0;a<this.heightList.length;a++){li=this.oOptionList.appendChild($C("LI"));li.style.textAlign="left";li.innerHTML=this.heightList[a]+"%";li.onmousedown=this.assignAction("lineheight",this.heightList[a]);try{li.style.cursor="pointer";}catch(b){li.style.cursor="hand";}}},onShow:function(){this.nr=new NodeRange(this.editor.getWindow(),this.editor.getDocument());if(this.nr.getType()=="table"){this.object.style.display="none";setTimeout(this.close.bind(this),100);alert(Editor._("plugin.font.notableeditor"));return;}this.sel=this.editor.getSelection();var b=this.getLineheight()*100+"%";for(var a=0;a<this.oOptionList.childNodes.length;a++){this.oOptionList.childNodes[a].className="";this.oOptionList.childNodes[a].onmouseover=function(){this.className="list_over";};this.oOptionList.childNodes[a].onmouseout=function(){this.className="";};if(this.oOptionList.childNodes[a].innerHTML==b){this.oOptionList.childNodes[a].className="list_select";this.oOptionList.childNodes[a].onmouseover=function(){this.className="list_over list_select";};this.oOptionList.childNodes[a].onmouseout=function(){this.className="list_select";};}}},onClose:function(){},getLineWrapper:function(d){var o=this.lineBreakers;function n(q){var s=null;var a=q;var r=q;function b(t){if(!t){return;}if(s){return;}if(o[t.tagName]){r=t;s=a;return;}p(t.previousSibling);if(s){return;}b(t.parentNode);}function p(u){if(!u){return;}if(o[u.tagName]){r=u;s=a;return;}if(u.hasChildNodes()&&u.tagName!="TABLE"){var t=u.lastChild;while(t&&!s){p(t);t=t.previousSibling;}}else{a=u;}if(!s){p(u.previousSibling);}}b(q);return[s,r];}function e(q){var b=null;var a=q;var r=q;function s(t){if(!t){return;}if(b){return;}if(o[t.tagName]){r=t;b=a;return;}p(t.nextSibling);if(b){return;}s(t.parentNode);}function p(u){if(!u){return;}if(o[u.tagName]){r=u;b=a;return;}if(u.hasChildNodes()&&u.tagName!="TABLE"){var t=u.firstChild;while(t&&!b){p(t);t=t.nextSibling;}}else{a=u;}if(!b){p(u.nextSibling);}}s(q);return[b,r];}var k,h;var m,l;var g,f;var c;k=n(d);h=e(d);m=k[0];g=k[1];l=h[0];f=h[1];this.nr.defineRange(m,l);if(g==f&&(g.tagName=="P"||g.tagName=="DIV")){c=g;}else{c=null;}return c;},actLineheight:function(n){this.nr=new NodeRange(this.editor.getWindow(),this.editor.getDocument());thisRef=this;function h(q,o){if(!q){try{q=thisRef.nr.surroundRangeWithNewNode("P");}catch(p){q=thisRef.nr.surroundRangeWithNewNode("DIV");}}q.style.lineHeight=o/100;return q;}function b(e){while(e&&e.tagName!="BODY"){e=e.parentNode;}if(!e){return false;}return true;}var a=this.getSelectedNodes();if(a.length==0){this.close();return;}var l,m;var d=a.length;if(d==0){return;}m=this.getLineWrapper(a[0]);m=h(m,n);var c=m;var g=m;for(var f=1;f<d;f++){try{if(!b(a[f].parentNode)){continue;}}catch(k){continue;}if(isChildOf(a[f],l)){continue;}l=this.getLineWrapper(a[f]);if(l==m){continue;}l=h(l,n);m=l;}g=l;setTimeout(function(o,e){this.nr.defineRange(o,e);this.nr.select();}.bind(this,c,g),100);this.close();},getSelectedNodes:function(){this.nr.cloneSelectedRange();var a=this.nr.getTextNodes();if(a.length==0){if(this.nr.getStartNode()){a[0]=this.nr.getStartNode();}else{a=[];}}return a;},getWrapperLineheight:function(c){var a=this.heightBreakers;var b="";if(c&&c.style.lineHeight){b=c.style.lineHeight;}else{c=this.nr.getCommonAncesterContainer();while(c&&!a[c.tagName]){if(c&&c.style.lineHeight){b=c.style.lineHeight;break;}c=c.parentNode;}}return b;},getLineheight:function(){var d=this.getSelectedNodes();var h,k;var e,a;if(d.length==0){return -1;}var f=d.length;if(f==0){a=-1;}else{k=this.getLineWrapper(d[0]);a=this.getWrapperLineheight(k);}var b=this.nr.getStartNode();if(a>0){for(var g=1;g<f;g++){if(isChildOf(d[g],h)){continue;}if(!d[g]){continue;}h=this.getLineWrapper(d[g]);if(h==k){continue;}curHeight=this.getWrapperLineheight(h);if(curHeight!=a){a=-1;break;}k=h;}}h=this.getLineWrapper(d[f-1]);var c=this.nr.getEndNode();selectText=function(m,l){this.nr.defineRange(m,l);this.nr.select();};setTimeout(selectText.bind(this,b,c),100);return a;}}));Editor.registerPlugin(lineHeightPlugin);var quotePlugin=new (Class.extend(Editor.menuPlugin,{name:"quote",list:[],_selectOne:function(a){for(var b=0;b<this.list.length;b++){this.list[b].firstChild.className="";}try{this.list[a].firstChild.className="last";}catch(c){}},onCreate:function(){this.list=this.object.getElementsByTagName("li");var c=this.actOver.bindForEvent(this);var b=this.actQuote.bindForEvent(this);for(var a=0;a<this.list.length;a++){this.list[a].onclick=b;this.list[a].onmouseover=c;}},onShow:function(){this.nr=new NodeRange(this.editor.getWindow(),this.editor.getDocument());if(this.nr.getType()=="table"){this.object.style.display="none";setTimeout(this.close.bind(this),100);alert(Editor._("plugin.font.notableeditor"));return;}this.editor.preserveSelection();this.editor.getWindow().focus();this._selectOne(this.list.length-1);},onClose:function(){},actOver:function(a){this._selectOne(-1);a.element.parentNode.className+=" list_over";},actQuote:function(t){if(t.element.tagName.toUpperCase()!="IMG"){return;}if(this.editor.getContent()==""){this.editor.setContent("<p>&nbsp;</p>");}var w=this.editor.getDocument();var m=this.editor.getSelection();var o,r,n,k;var g=t.element.src.match(/([0-9]+)\.gif/i)[1];var a=/(^|\s)last(\s|$)/.test(t.element.parentNode.parentNode.className);var v=function(e){for(var b=0;b<e.childNodes.length;){e.parentNode.insertBefore(e.firstChild,e);}e.parentNode.removeChild(e);};var h=function(b){while(b){if(b.nodeType==1&&!/TABLE|TBODY|TFOOT|THEAD|TR/i.test(b.tagName)){return b;}b=b.parentNode;}return null;};if($Agent().OldIE&&m.type=="none"){this.editor.getWindow().focus();if(m.parentElement.innerHTML==""){m.parentElement.innerHTML="&nbsp";}m.refresh();}o=h(m.parentElement);r=this.getBlock(o,"blockquote");if(o===w.documentElement){o=w.body;}if(!r){var q=function(b){if(b===o){return b;}while(b.parentNode){if(b.parentNode===o){return b;}b=b.parentNode;}return null;};if(w.body.childNodes.length==0){w.body.innerHTML="<p>&nbsp;</p>";}if(m.startNode===w.body){m.startNode=w.body.firstChild;}if(m.endNode===w.body){m.endNode=w.body.firstChild;}var d=q(m.startNode);var c=q(m.endNode);if(d&&d.nodeType==1&&d.tagName.toLowerCase()=="li"){d=d.parentNode;}if(c&&c.nodeType==1&&c.tagName.toLowerCase()=="li"){c=c.parentNode;}r=w.createElement("blockquote");d.parentNode.insertBefore(r,d);while(r.nextSibling&&r.nextSibling!==c){r.appendChild(r.nextSibling);}r.appendChild(c);}try{r.className="quote"+g;n=r.getElementsByTagName("blockquote");for(var s=0;s<n.length;s++){v(n[s]);}}catch(f){}m.selectNode(r);if(a&&r){v(r);}else{var u=w.body,l;if(u.firstChild===r){l=w.createElement("P");l.innerHTML="&nbsp;";u.insertBefore(l,r);}if(u.lastChild===r){l=w.createElement("P");l.innerHTML="&nbsp;";u.appendChild(l);}}this.close();},getBlock:function(f,b){var d=null;var a=[];for(var c=1;c<arguments.length;c++){a.push(arguments[c].toLowerCase());}while(f){try{if(a.has(f.tagName.toLowerCase())){d=f;}}catch(g){}f=f.parentNode;if(!f||f.nodeType==1&&f.tagName.toLowerCase()=="body"){break;}}return d;},removeParent:function(c){var b=c.parentNode;for(var a=0;a<b.childNodes.length;a++){b.parentNode.insertBefore(b.firstChild,b);}b.parentNode.removeChild(b);}}));Editor.registerPlugin(quotePlugin);function escapeHTMLText(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a;}var Search={_keyword:new String(),_win:null,_doc:null,_range:null,iCurrent:0,_find:function(b){var a=false;this._keyword=b;if(this._win.find){this._findReset();a=this._win.find(b);}else{if(this._doc.body.createTextRange){this._range=this._doc.body.createTextRange();a=this._range.findText(b);this._range.select();}}return a;},_findNext:function(){var a=false;if(this._win.find){a=this._win.find(this._keyword);}else{if(this._doc.body.createTextRange){this._range.collapse(false);a=this._range.findText(this._keyword);this._range.select();}}return a;},_findPrev:function(){var a=false;if(this._win.find){a=this._win.find(this._keyword);}else{if(this._doc.body.createTextRange){this._range.pasteHTML($("replace").value);this._range.select();}}return a;},_findReset:function(){if(this._win.find){this._win.getSelection().removeAllRanges();}else{this._range.moveStart("textedit");this._range.select();}},searchkey:function(d,c){var a=c;var b=false;this._win=d.getWindow();this._doc=d.getDocument();this._win.focus();if(document.domain!=document.location.hostname){if($Agent().IE==false){alert(Editor._("plugin.searchreplace.notsupport"));return false;}}if(a){if(this._keyword!=a){this.iCurrent=0;}if(this.iCurrent==1){b=this._findNext();}else{b=this._find(a);}}else{alert(Editor._("plugin.searchreplace.inputkeyword"));return false;}if(b==false){if(this.iCurrent==1){this._findReset();if(b==false){this.iCurrent=0;return false;}}else{this._findReset();alert(Editor._("plugin.searchreplace.notfound"));return false;}}else{this.iCurrent=1;return false;}}};var searchkeyPlugin=new (Class.extend(Editor.dialogPlugin,{name:"searchkeyword",author:"shgraph",modal:false,onCreate:function(){},onShow:function(){if(document.domain!=document.location.hostname){if($Agent().IE==false){alert(Editor._("plugin.searchreplace.notsupport"));setTimeout(this.close.bind(this),10);return true;}}$("keyword").value="";$("keyword").focus();},onClose:function(){},actGoreplace:function(){this.editor.execCommand("replacekeyword",this._button);$("keyword_re").value=$("keyword").value;},actClose:function(){this.close();},actSearch:function(){var a=$("keyword").value;var c=this.editor;var b=Search.searchkey(c,a);}}));var replacekeyPlugin=new (Class.extend(Editor.dialogPlugin,{name:"replacekeyword",author:"shgraph",modal:false,_range:null,iTemp:0,onCreate:function(){$("keyword_re").value="";$("replace").value="";},onShow:function(){$("replace").value="";$("keyword_re").focus();},onClose:function(){},actClose:function(){this.close();},actGosearch:function(){this.editor.execCommand("searchkeyword");$("keyword").value=$("keyword_re").value;},actSearch:function(){var a=$("keyword_re").value;var c=this.editor;var b=Search.searchkey(c,a);this.iTemp=1;return b;},actReplace:function(){var e=this.editor;e.getWindow().focus();var a=$("keyword_re").value;var f=$("replace").value;var d=null;var c=null;var b=$Agent();f=escapeHTMLText(f);if(this.iTemp==0){c=Search.searchkey(e,a);if(c){d=e.getSelection();}}if(Search.iCurrent==1){this.iTemp=1;d=e.getSelection();if(b.IE){Search._findPrev();}else{d.setHTML(f);}c=Search.searchkey(e,a);if(!c){d=e.getSelection();}}if(Search.iCurrent!=1){this.iTemp=0;}return c;},actAllreplace:function(){var d=this.editor;d.getWindow().focus();var b=$("keyword_re").value;var e=$("replace").value;var a=d.getContent();var c=new String();if(b){c=this.sAllReplace(b,e,a);}else{c=false;alert(Editor._("plugin.searchreplace.inputkeyword"));}if(c!=false){d.setContent(c);}else{d.setContent(a);}if(this.iTemp!=0){this.iTemp=0;Search.iCurrent=0;}return true;},sAllReplace:function(b,h,a){var e=new String();var g=null;var d=/([^<]+)|<[^<>]*>/gi;var f=/<[^>]*>/gi;b=escapeHTMLText(b);g=new RegExp(b,"gi");var c=0;if(g.test(a)){c=a.match(g).length;e=a.replace(d,function(){var k=new String();if(arguments[1]==undefined){return arguments[0];}if(arguments[1].length){k=arguments[1].replace(g,h);}else{k=arguments[0];}return k;});alert(Editor._("plugin.searchreplace.allreplace1")+c+Editor._("plugin.searchreplace.allreplace2"));return e;}else{alert(Editor._("plugin.searchreplace.notfound"));return false;}}}));Editor.registerPlugin(searchkeyPlugin);Editor.registerPlugin(replacekeyPlugin);var spellcheckDocPlugin=new (Class.extend(Editor.documentPlugin,{name:"spellcheckdoc",_suggest:null,_reqSuggest:new String(),_curEvent:null,directInput:0,onMousedown:function(f){var b=document.body;try{if(f.element.tagName==undefined){if(spellcheckDocPlugin._suggest){spellcheckDocPlugin._suggest.parentNode.removeChild(spellcheckDocPlugin._suggest);spellcheckDocPlugin._suggest=null;}return;}if(f.element.tagName.toLowerCase()!="span"||f.element.id.toLowerCase()!="spellcheckarea"){if(spellcheckDocPlugin._suggest){spellcheckDocPlugin._suggest.parentNode.removeChild(spellcheckDocPlugin._suggest);spellcheckDocPlugin._suggest=null;}return;}if(f.element.className.match("NHN_SPELL")!="NHN_SPELL"){if(spellcheckDocPlugin._suggest){spellcheckDocPlugin._suggest.parentNode.removeChild(spellcheckDocPlugin._suggest);spellcheckDocPlugin._suggest=null;}return;}var d=f.element.className.replace(/correct NHN_SPELL\+/,"");this._curEvent=f;var a=Element.realPos(this.editor.iframe);var g=Element.realPos(f.element);if(this._suggest){this._suggest.parentNode.removeChild(spellcheckDocPlugin._suggest);this._suggest=null;}var c=this._suggest=this.editor.toolbox.parentNode.appendChild($C("div"));c.style.display="none";c.style.width="118px";c.style.position="absolute";c.style.top=(a.top+g.top+f.element.offsetHeight-this.editor.getDocument().body.scrollTop-this.editor.base_pos.top)+"px";c.style.left=(a.left+g.left-this.editor.base_pos.left)+"px";c.style.background="#FFFFFF";c.style.zIndex="1";sellcheckPlugin.actSearchKeyword(d,this.getReqData);}catch(f){}},getReqData:function(g){try{var f=new String();var a=JINDO.xml2obj(g)._nodeValue;if(a==undefined){a="";}var k=a.split("+");var b=k.length-1;var l=new String();var h=$("spellcheck_suggestionlayer").innerHTML;if(b>0){for(var c=0;c<b;c++){f=decodeURIComponent(k[c]);f=f.replace(/'/g,"");l+="<li style='cursor:pointer; width:100%' onMouseOut='this.className=\"\"' onMouseOver='this.className=\"list_over\"' onClick='spellcheckDocPlugin.directInput=1;spellcheckDocPlugin.changeSpell(\""+f+"\");return false;' >"+f+"</li>";}}else{l="<li>"+Editor._("plugin.spellcheck.nosuggest")+"</li>";}spellcheckDocPlugin._suggest.innerHTML=h.replace(/{REPLACE}/g,l);spellcheckDocPlugin._suggest.style.display="inline";}catch(d){}},changeSpell:function(a){if(this.directInput==1&&a){this.directInput=0;this._curEvent.element.innerHTML=a;}this._curEvent.element.className="";this._suggest.style.display="none";}}));var sellcheckPlugin=new (Class.extend(Editor.simplePlugin,{name:"spellcheck",description:"SpellCheck in document",author:"shgraph",iCheckMode:0,bEvent:null,sDoc:new String(),url:"http://gut.naver.com/spellchk/spell",_sendSpellCheck:function(e,d,c){var a=this;a.sDoc=a.editor.getContent();a.actFunction=c;var b=new Ajax(this.url,{method:e,params:d,onLoad:function(g){var f=g.responseText;a.actFunction(f);}});},actCheckspell:function(n){var f=this.editor;var m=this.sDoc;var h='<span id="spellcheckarea" class="correct NHN_SPELL+{MATCH}">';var g="</span>";var p=/([^<]+)|<[^<>]*>/gi;var q=null;var o=new String();var l=new String();try{var c=JINDO.xml2obj(n)._nodeValue;if(c==undefined){c="";}var k=c.split("+");var r=new Array();var b=k.length;k.sort();j=0;r=new Array();for(var s=0;s<b;s++){if(k[s].length>0){r[j]=k[s];j++;if((s>0)&&(k[s]==k[s-1])){r.pop();j--;}}}k=r;b=k.length;for(s=0;s<b;s++){if(s!=0){l+="|";}l+=decodeURIComponent(k[s]);}var a=function(){};if(b>0){q=new RegExp("("+l+")","gi");a=function(e){return e.replace(q,function(x,w){if(arguments.length<2){return x;}return h.replace(/\{MATCH\}/g,w)+w+g;});};m=m.replace(p,function(w,e,z,y,x){if(w.match("&lt;")){return w;}if(w.match("&gt;")){return w;}if(e==undefined){return w;}if(e.length<1){return w;}return a(e);});}o=m;var d=Editor._("plugin.spellcheck.checkinfomessage");$("spellcheckModeText").innerHTML=d.replace(/{NUMBER}/g,b);$("spellcheckModeRow").style.display="";f.setContent(o);f._activeFrame=null;var u=f.getDocument().body.getElementsByTagName("span");var v=u.length;spellcheckDocPlugin.editor=f;this.bEvent=spellcheckDocPlugin.onMousedown.bindForEvent(spellcheckDocPlugin);Event.register(f.getDocument().body,"mousedown",this.bEvent);Event.register(f.getDocument().body,"mousewheel",this.bEvent);}catch(t){}},onCreate:function(){},onCommand:function(a){if(a=="html"){if(this.iCheckMode!=0){this.onExecute();}}},actSearchKeyword:function(a,b){var c={id:"test",cmd:"suggest",check:a};this._sendSpellCheck("post",c,b);},onExecute:function(){var c=this.editor;var a=c.getContent();var e=/<\S[^><]*>/g;var d=null;var b=new String();if(this.iCheckMode==0){c.preserveSelection();setTimeout(function(){a=a.replace(/<br>/i," ").replace(e,"").replace(/\&nbsp;/g,"").replace(/"/g,"");var h=encodeURIComponent(a).length;if(h>20480&&h<102400){if(!confirm(Editor._("plugin.spellcheck.waitmessage1"))){return;}}else{if(h>=102400){alert(Editor._("plugin.spellcheck.waitmessage2"));return;}}var f=1;var g={id:"test"+f,cmd:"spell",check:a};this._sendSpellCheck("post",g,this.actCheckspell);this.iCheckMode=1;}.bind(this),500);}else{$("spellcheckModeRow").style.display="none";this.iCheckMode=0;if($Agent().IE){rSearchExp1=new RegExp("<span [^>]* id=spellcheckarea>(.*?)</span>","gi");}else{rSearchExp1=new RegExp('<span id="spellcheckarea"[^>]*>(.*?)</span>',"gi");}b=a.replace(rSearchExp1,"$1");b=b.replace(rSearchExp1,"$1");if($Agent().IE){rSearchExp1=new RegExp('<span class="correct NHN_SPELL[^>]*>(.*?)</span>',"gi");}else{rSearchExp1=new RegExp('<span [^>]* class="correct NHN_SPELL[^>]*>(.*?)</span>',"gi");}b=a.replace(rSearchExp1,"$1");b=b.replace(rSearchExp1,"$1");if(spellcheckDocPlugin._suggest){spellcheckDocPlugin._suggest.parentNode.removeChild(spellcheckDocPlugin._suggest);spellcheckDocPlugin._suggest=null;}Event.unregister(c.getDocument().body,"mousedown",this.bEvent);Event.unregister(c.getDocument().body,"mousewheel",this.bEvent);c.setContent(b);c.preserveSelection();}c.getWindow().focus();}}));Editor.registerPlugin(sellcheckPlugin);Editor.registerPlugin(spellcheckDocPlugin);var ChangeTable={tbo:null,iRownum:0,iCellnum:0,_chCols:function(h){var c=parseInt(h);var e=this.iCellnum;var d="\u00a0";var g=null;var b=0,a=0;var f=c-e;this.iCellnum+=f;if(f<0){f*=-1;iFlag=0;}else{iFlag=1;}for(b=0;b<this.iRownum;b++){for(a=0;a<f;a++){if(iFlag){g=this.tbo.rows[b].insertCell(-1);}else{this.tbo.rows[b].deleteCell(-1);}}}},_delRows:function(c){var b=this.tbo;this.iRownum-=c;for(var a=0;a<c;a++){b.deleteRow(0);}},_addRows:function(h){var f=this.tbo;var d=this.iCellnum;var b=null;var g=null;var e="\u00a0";var c=0,a=0;this.iRownum+=h;for(c=0;c<h;c++){b=f.insertRow(-1);for(a=0;a<d;a++){g=b.insertCell(-1);}b.bgColor=f.rows[0].bgColor;}},_chRows:function(c){var a=parseInt(c);var b=this.iRownum;if(b>a){this._delRows(b-a);}else{if(b<a){this._addRows(a-b);}}},_chBorder:function(a){if(a>=0){this.tbo.cellSpacing=a;this.tbo.className="";}else{this.tbo.cellSpacing=a;this.tbo.className="noneBorder";}},_chBoderColor:function(a){this.tbo.bgColor=a;},_chBgColor:function(a){for(i=0;i<this.iRownum;i++){this.tbo.rows[i].bgColor=a;}}};var insertTablePlugin=new (Class.extend(Editor.menuPlugin,{name:"inserttable",author:"shgraph",modal:false,bPreserveSelection:false,cpCreated:false,cpp:null,selCp:0,range:null,nr:null,sel:null,elmInTable:null,DEF_BorderSize:1,DEF_BorderColor:"#B7BBB5",DEF_BGColor:"#FFFFFF",DEF_COLS:4,DEF_ROWS:4,onCreate:function(){var f=new wrapperTable("table_color_tbl");var b=f.getCells();var c;for(var a=0;a<b.length;a++){cell=b[a];c=cell.bgColor;if(c!=""){cell.onmousedown=this.actSelcolor.bind(this,c);try{cell.style.cursor="pointer";}catch(d){cell.style.cursor="hand";}}}},onShow:function(){this.nr=new NodeRange(this.editor.getWindow(),this.editor.getDocument());this.elmInTable=this.nr.findContainer("TABLE");if(this.elmInTable&&this.elmInTable.id){this.elmInTable="";}if(this.elmInTable){this.DEF_BorderSize=this.elmInTable.cellSpacing;this.DEF_BorderColor=this.elmInTable.bgColor;this.DEF_BGColor="#FFFFFF";var a=this.elmInTable.getElementsByTagName("TR");if(a[0]){this.DEF_BGColor=a[0].bgColor;}this.DEF_COLS=parseInt((this.elmInTable.rows.item(0))?this.elmInTable.rows.item(0).getElementsByTagName("td").length:1);this.DEF_ROWS=parseInt(this.elmInTable.rows.length);$("insertTable_plugin_cellrow").style.display="none";}else{this.DEF_BorderSize=1;this.DEF_BorderColor="#B7BBB5";this.DEF_BGColor="#FFFFFF";this.DEF_COLS=4;this.DEF_ROWS=4;$("insertTable_plugin_cellrow").style.display="block";}this.resetTable();this.actClosecp();},onClose:function(){},actClose:function(){this.close();},actInsert:function(){var b=this.editor;if(this.range==null){var c=this.editor.getSelection();}else{c=this.sel;}this.nr.moveToBookmark();this.nr.removeBookmark();if(this.elmInTable){ChangeTable.tbo=this.elmInTable;this.actChange("chBorder",$("border_val").value);this.actChange("chBorderColor",$("borderColorCode").value);this.actChange("chBgColor",$("backColorCode").value);}else{var a=$("insertTable_plugin_pretable");var d=this.sMakeTable(a);this.editor._execCommand("inserthtml",d);}this.close();},resetTable:function(){var c=this.object.style.display;this.editor.getWindow().focus();this.object.style.display=c;this.nr=new NodeRange(this.editor.getWindow(),this.editor.getDocument());this.nr.bookmark();this.range=null;var d=this.editor.getSelection();var f=d.getRange();this.sel=d;if(f.cloneRange){this.range=f.cloneRange();}else{if(f.duplicate){this.range=f.duplicate();}}var b=$("insertTable_plugin_pretable");var e=this.DEF_BorderColor;var a=this.DEF_BGColor;ChangeTable.tbo=b;ChangeTable.iRownum=parseInt(ChangeTable.tbo.rows.length);ChangeTable.iCellnum=parseInt((b.rows.item(0))?b.rows.item(0).getElementsByTagName("td").length:1);this.actChange("chRows",this.DEF_ROWS);this.actChange("chCols",this.DEF_COLS);this.actChange("chBorder",this.DEF_BorderSize);$("rows_val").value=this.DEF_ROWS;$("cols_val").value=this.DEF_COLS;$("border_val").value=this.DEF_BorderSize;$("borderColor").style.backgroundColor=e;$("borderColorCode").value=e;$("backColor").style.backgroundColor=a;$("backColorCode").value=a;this.actChange("chBorderColor",e);this.actChange("chBgColor",a);},sMakeTable:function(c){var b=c.rows.length;var l=(c.rows.item(0))?c.rows.item(0).getElementsByTagName("td").length:1;var h=c.cellSpacing;var k=c.bgColor;var n=c.rows[0].bgColor;var f=0,e=0;var m=new String();var d=new String();var g=this.editor.getDocument().body.clientWidth-150;var a=parseInt(g/l);m='<table border="0" width="'+g+'px" height="40" cellspacing="'+h+'" cellpadding="1" bgcolor="'+k+'">';d="<tr bgcolor="+n+">";for(e=0;e<l;e++){d+="<td width='"+a+"px'>&nbsp;</td>";}d+="</tr>";m+=d;for(f=1;f<b;f++){d="<tr bgcolor="+n+">";for(e=0;e<l;e++){d+="<td>&nbsp;</td>";}d+="</tr>";m+=d;}m+="</table><br><br>";return m;},actChange:function(b,e){if(!e){return;}this.editor.preserveSelection();switch(b){case"chRows":if(isFinite(e)){if(e<=20&&e>=1){ChangeTable._chRows(e);}else{alert(Editor._("plugin.table.checksize"));ChangeTable._chRows(4);$("rows_val").value=4;}}else{var d=0;if(e=="ADD"){d=ChangeTable.iRownum+1;if(d>=21){break;}}else{if(e=="SUB"){d=ChangeTable.iRownum-1;if(d<=0){break;}}else{ChangeTable._chRows(4);$("rows_val").value=4;d=0;break;}}if(d!=0){ChangeTable._chRows(d);$("rows_val").value=d;}}break;case"chCols":if(isFinite(e)){if(e<=20&&e>=1){ChangeTable._chCols(e);}else{alert(Editor._("plugin.table.checksize"));ChangeTable._chCols(4);$("cols_val").value=4;}}else{var d=0;if(e=="ADD"){d=ChangeTable.iCellnum+1;if(d>=21){break;}}else{if(e=="SUB"){d=ChangeTable.iCellnum-1;if(d<=0){break;}}else{ChangeTable._chCols(4);$("cols_val").value=4;d=0;break;}}if(d!=0){ChangeTable._chCols(d);$("cols_val").value=d;}}break;case"chBorder":if(isFinite(e)){if(e<=10&&e>0){ChangeTable._chBorder(e);}else{alert(Editor._("plugin.table.checkborder"));$("border_val").value=1;ChangeTable._chBorder(1);}}else{var d=0;if(e=="ADD"){d=parseInt(ChangeTable.tbo.cellSpacing)+1;if(d>=11){break;}}else{if(e=="SUB"){d=parseInt(ChangeTable.tbo.cellSpacing)-1;if(d<0){break;}}else{ChangeTable._chBorder(1);$("border_val").value=1;d=0;break;}}if(d!=0){ChangeTable._chBorder(d);$("border_val").value=d;}}break;case"chBorderColor":if(this.checkColor(e)){ChangeTable._chBoderColor(e);}else{alert(Editor._("plugin.table.checkcolor"));var c="#B7BBB5";ChangeTable._chBoderColor(c);$("borderColor").style.backgroundColor=c;$("borderColorCode").value=c;}break;case"chBgColor":if(this.checkColor(e)){ChangeTable._chBgColor(e);}else{alert(Editor._("plugin.table.checkcolor"));var a="#FFFFFF";ChangeTable._chBgColor(a);$("backColor").style.backgroundColor=a;$("backColorCode").value=a;}break;}},checkColor:function(a){var b=/^#?[0-9a-fA-F]{6}$/;if(b.test(a)){return true;}else{return false;}},actViewcolorpicker:function(b){this.selCp=b;$("table_div_cp").style.margin=((this.selCp==0)?-80:-55)+"px 0 0 10px";var a=$("table_div_cp").style.display;if(a=="none"){$("table_div_cp").style.display="block";$("table_div_cp_bottom").style.display="none";}else{$("table_div_cp").style.display="none";}},actViewcolorpicker_tc:function(){this.editor.preserveSelection();var a=$("table_div_cp_bottom").style.display;$("tbg_txt_color").style.backgroundColor="#000000";$("tbg_txt_colorCode").value="#000000";if(a=="none"){$("table_div_cp_bottom").style.display="block";if(this.cpCreated){this.cpp.setHSV(0,100,100);}else{this.cpCreated=true;this.cpp=new Ku.Colorpicker("cp_table",{onChange:function(b){$("tbg_txt_color").style.backgroundColor="#"+b;$("tbg_txt_colorCode").value="#"+b;}});}}else{$("table_div_cp_bottom").style.display="none";}},actSelcolor:function(d){var b=new Object();var a=new Object();var e=new String();this.editor.preserveSelection();if(this.selCp==0){b=$("borderColor").style;a=$("borderColorCode");e="chBorderColor";}else{b=$("backColor").style;a=$("backColorCode");e="chBgColor";}var c=(d)?d:$("tbg_txt_colorCode").value;if(this.checkColor(c)==false){alert(Editor._("plugin.table.checkcolor"));this.actClosecp();return;}b.backgroundColor=c;a.value=c;this.actClosecp();this.actChange(e,a.value);},actClosecp:function(){this.editor.preserveSelection();$("table_div_cp").style.display="none";},actClosecp2:function(){this.editor.preserveSelection();$("table_div_cp_bottom").style.display="none";}}));Editor.registerPlugin(insertTablePlugin);function NodeRange(b,a){if(!b){b=window;}if(!a){a=document;}this.win=b;this.doc=a;NodeRangeCommon.apply(this);if(a.selection){NodeRangeIE.apply(this);}else{NodeRangeFF.apply(this);}}function NodeRangeCommon(){this.id_id=0;this.getTempId=function(){var a="temp_hw713";var b;do{b=a+this.id_id;this.id_id++;}while(this.doc.getElementById(b));return b;};this.bookmarkId=this.getTempId();this.clone=function(){var a=new this.constructor(this.win,this.doc);a.sel=this.sel;a.range=this.cloneRange();return a;};this.findContainer=function(a){var b=this.getCommonAncesterContainer();while(b&&b.tagName!=a){b=b.parentNode;}return b;};this.getNodeAtCursor=function(g,e,b){var a=null;e=e?e:false;b=b?b:false;var c=this.doc.createElement("SPAN");c=g.insertNodeClone(c);var d=c.previousSibling;var f=c.nextSibling;c.parentNode.removeChild(c);if((d&&d.nodeType==3)&&(f&&f.nodeType==3)){d.nodeValue=d.nodeValue+f.nodeValue;f.parentNode.removeChild(f);a=d;}else{if(e){if(d){a=d;}else{if(!b){a=f;}}}else{if(f){a=f;}else{if(!b){a=d;}}}}return a;};this.bookmark=function(){var a=this.doc.getElementById(this.bookmarkId);if(a){this.removeBookmark();}a=this.doc.createElement("A");a.id=this.bookmarkId;this.collapseToStart();this.insertNodeClone(a);};this.moveToBookmark=function(){var a=this.doc.getElementById(this.bookmarkId);if(!a){return;}this.defineRange(a);this.select();};this.removeBookmark=function(){var a=this.doc.getElementById(this.bookmarkId);if(!a){return;}a.parentNode.removeChild(a);};this.getStartNode=function(){try{var b=this.clone();b.collapseToStart();return this.getNodeAtCursor(b,false);}catch(a){return null;}};this.getEndNode=function(){var a=this.clone();a.collapseToEnd();return this.getNodeAtCursor(a,true);};this.createAndInsertNode=function(b){var a=this.doc.createElement(b);this.insertNode(a);return a;};this.collapseToStart=function(){this.range.collapse(true);};this.collapseToEnd=function(){this.range.collapse(false);};this.startMarker;this.endMarker;this.firstNode;this.lastNode;this.markBothEnds=function(){this.startMarker=this.doc.createElement("SPAN");this.startMarker.innerHTML="[S-point]";this.endMarker=this.doc.createElement("SPAN");this.endMarker.innerHTML="[E-point]";var b=this.clone();var a=this.clone();b.collapseToStart();a.collapseToEnd();this.endMarker=a.insertNodeClone(this.endMarker);this.startMarker=b.insertNodeClone(this.startMarker);this.firstNode=this.startMarker.nextSibling;this.lastNode=this.endMarker.previousSibling;this.defineRange(this.startMarker,this.endMarker);};this.unmarkBothEnds=function(){this.startMarker.parentNode.removeChild(this.startMarker);this.endMarker.parentNode.removeChild(this.endMarker);this.startMarker=null;this.endMarker=null;};this.doGetNodes=function(h,c){var g=new Array();var a=false;var e=c;var d=this.startMarker;var f=this.endMarker;function b(m){if(m==d){a=true;return;}if(m==f){a=false;return;}if(a&&e(m)){g.push(m);}var n=m.childNodes;if(n!=null){var k=n.length;for(var l=0;l<k;l++){b(n.item(l));}}}b(h);return g;};this.getNodes=function(a){var c=new Array();var b=new Array();if(this.isCollapsed()){return b;}if(!a){a=function(d){return true;};}this.markBothEnds();c=this.doGetNodes(this.getCommonAncesterContainer(),a);this.defineRange(this.startMarker,this.endMarker);this.unmarkBothEnds();return c;};this.getTextNodes=function(){if(this.range.text==""){return new Array();}var a=function(b){if(b.nodeType==3&&b.nodeValue!="\n"&&b.nodeValue!=""){return true;}else{return false;}};return this.getNodes(a);};this.cleanUpEmptyString=function(d){function a(e){if(!e||e==""){return true;}return false;}var c;for(var b=0;b<d.childNodes.length;b++){c=d.childNodes[b];if(c.nodeType==3&&a(c.nodeValue)){d.removeChild(c);}}};this.surroundRangeWithNewNode=function(b){var a=this.doc.createElement(b);return this.surroundRange(a);};}function NodeRangeIE(){this.getType=function(){return this.sel.type;};this.select=function(){this.range.select();};this.getCommonAncesterContainer=function(){return this.range.parentElement();};this.cloneRange=function(){return this.range.duplicate();};this.insertNodeClone=function(c){var d=this.range.duplicate();d.collapse(true);var b=c.id;var e=this.getTempId();c.id=e;this.range.pasteHTML(c.outerHTML);c=this.doc.getElementById(e);c.id=b;return c;};this.insertNode=function(c){var b=this.doc.createElement("A");b=this.insertNodeClone(b);b.parentNode.insertBefore(c,b);b.parentNode.removeChild(b);};this.inRange=function(d,e,c){var b=this.range.duplicate();b.moveToElementText(d);if(!c){b=this._tidyRange(b);}return this.range.inRange(b);};this.isCollapsed=function(){var b=this.range.duplicate();b.collapse(true);return b.isEqual(this.range);};this.surroundNode=function(c,b){b.parentNode.insertBefore(c,b);c.appendChild(b);return c;};this.surroundRange=function(d){var c=d.id;var l=this.getTempId();d.id=l;d.innerHTML=this.range.text;var b=this.range.duplicate();this.range.pasteHTML("");b.collapse(true);this.range=b;this.range.pasteHTML(d.outerHTML);d=this.doc.getElementById(l);d.id=c;try{var h=d.lastChild;var f=d.nextSibling;var g=true;do{if(!h||f.childNodes>1||h.tagName!=f.tagName){g=false;break;}h=h.lastChild;f=f.firstChild;}while(f);if(g){d.nextSibling.parentNode.removeChild(d.nextSibling);}}catch(k){}this.defineRange(d);return d;};this.defineRange=function(c,b){if(!c){return;}if(!b){b=c;}this.setStartBefore(c);this.setEndAfter(b);this.setStartBefore(c);this.setEndAfter(b);};this.cloneSelectedRange=function(){var b=this.sel.createRange();if(this.sel.type=="Control"){this.range=this.doc.body.createTextRange();this.defineRange(b.item(0));this.select();}this.range=this.sel.createRange().duplicate();};this.setStartBefore=function(c){if(!c){return;}var d=this.doc.body.createTextRange();var b=this.doc.createElement("A");b.innerHTML="[about_to_select]";c.parentNode.insertBefore(b,c);d.moveToElementText(b);this.range.setEndPoint("StartToEnd",d);b.parentNode.removeChild(b);};this.setEndAfter=function(c){if(!c){return;}var d=this.doc.body.createTextRange();var b=this.doc.createElement("A");b.innerHTML="[about_to_select]";c.parentNode.insertBefore(b,c.nextSibling);d.moveToElementText(b);this.range.setEndPoint("EndToStart",d);b.parentNode.removeChild(b);};this.toString=function(){return this.range.text;};this.sel=this.doc.selection;this._tidyRange=function(b){b.moveStart("character",1);b.moveStart("character",-1);b.moveEnd("character",1);b.moveEnd("character",-1);return b;};this.cloneSelectedRange();var a=this;}function NodeRangeFF(){this.sel=this.win.getSelection();this.range=null;this.getType=function(){if(this.sel.anchorNode&&this.sel.anchorNode.tagName=="TR"){return"table";}else{return"text";}};this.cloneSelectedRange=function(){this.range=this.doc.createRange();if(this.sel&&this.sel.rangeCount>0){this.range=this.sel.getRangeAt(0).cloneRange();}};this.cloneRange=function(){return this.range.cloneRange();};this.insertNodeClone=function(a){var b=this.cloneRange();var c=a.cloneNode(true);b.insertNode(c);this.cleanUpEmptyString(c.parentNode);return c;};this.insertNode=function(a){this.range.insertNode(a);this.cleanUpEmptyString(a.parentNode);};this.select=function(){this.sel.removeAllRanges();this.sel.addRange(this.range);};this.getCommonAncesterContainer=function(){return this.range.commonAncestorContainer;};this.inRange=function(g,c,b){var h=this.doc.createRange();this.cleanUpEmptyString(g);if(b){h.selectNode(g);}else{h.setStartBefore(g.firstChild);h.setEndAfter(g.lastChild);}var f=this.range.compareBoundaryPoints(Range.START_TO_START,h);var d=this.range.compareBoundaryPoints(Range.START_TO_END,h);var e=this.range.compareBoundaryPoints(Range.END_TO_START,h);var a=this.range.compareBoundaryPoints(Range.END_TO_END,h);if((f==0||f==-1)&&(a==0||a==1)){return true;}if(c){if((f==1||f==0)&&d==-1){return true;}if(d==-1&&(a==0||a==1)){return true;}}return false;};this.isCollapsed=function(){return this.range.collapsed;};this.surroundNode=function(b,a){a.parentNode.insertBefore(b,a);b.appendChild(a);return b;};this.surroundRange=function(a){this.range.surroundContents(a);return a;};this.defineRange=function(b,a){if(!b){return;}if(!a){a=b;}this.range.setEndAfter(a);this.range.setStartBefore(b);};this.toString=function(){return this.range.toString();};this.cloneSelectedRange();}var layoutmanagerPlugin=new (Class.extend(Editor.menuPlugin,{name:"layoutmanager",author:"TarauS",description:"insert layout",preservedSelection:null,sSelectedID:null,bRequest:false,onCreate:function(){},onShow:function(){this.preservedSelection=this.editor.getSelection();if(this.sSelectedID){$("elLayoutContainer_"+this.sSelectedID).className="";this.sSelectedID=null;}var a=1;while(previewImg=$("elPreviewButton_"+((a<10)?"0"+a:a))){previewImg.style.display="block";this.setOpacity(previewImg,0);a++;}},setOpacity:function(b,a){b.style.filter="alpha(opacity="+a+")";b.style.MozOpacity=a/100;},onClose:function(){},actMouseover:function(a){this.setOpacity($("elPreviewButton_"+a),100);return false;},actMouseout:function(a){this.setOpacity($("elPreviewButton_"+a),0);return false;},actPreviewlayout:function(b){var a=this.editor.options.layoutPreviewUrl+(/\?/.test(this.editor.options.layoutPreviewUrl)?"&type="+b:"?type="+b)+"&no_cache="+(new Date()).getTime();window.open(a,"wndPreviewLayout");},actSelectlayout:function(a){if(this.sSelectedID){$("elLayoutContainer_"+this.sSelectedID).className="";}this.sSelectedID=a;$("elLayoutContainer_"+a).className="on";},actInsertlayout:function(){if(!this.sSelectedID){alert(Editor._("plugin.layoutmanager.notselect2"));return false;}if(this.getSelectedLayout()){alert(Editor._("plugin.layoutmanager.notinsert"));return false;}var b=this;var a=this.editor;if(typeof maxImageWidth=="undefined"){maxImageWidth=743;}sUrl=a.options.layoutUrl+(/\?/.test(a.options.layoutUrl)?"&type="+this.sSelectedID:"?type="+this.sSelectedID)+"&width="+maxImageWidth+"&no_cache="+(new Date()).getTime();if(this.bRequest){alert(Editor._("plugin.layoutmanager.nowrequesting"));return false;}else{this.bRequest=true;new Ajax(sUrl,{onLoad:function(c){if(/NHN_Layout_Main/.test(c.responseText)){a.execCommand("inserthtml",null,c.responseText);b.close();}else{alert(Editor._("plugin.layoutmanager.notexistfile"));}b.bRequest=false;}});}},actCancellayout:function(){var a=this.getSelectedLayout();if(a!=null){if(confirm(Editor._("plugin.layoutmanager.cancel"))){a.parentNode.removeChild(a);this.editor.resizeContentArea(this.editor.options.minHeight);this.editor.getWindow().focus();}}else{alert(Editor._("plugin.layoutmanager.notselect"));}this.close();},actCloselayout:function(){this.close();},getSelectedLayout:function(){try{oSelectedLayout=this.preservedSelection.startContainer||this.preservedSelection.endContainer;while(oSelectedLayout.tagName.toLowerCase()!="table"||oSelectedLayout.className!="NHN_Layout_Main"){if(oSelectedLayout.parentNode==null||oSelectedLayout.tagName.toLowerCase()=="body"){return null;}oSelectedLayout=oSelectedLayout.parentNode;}return oSelectedLayout;}catch(a){return null;}}}));Editor.registerPlugin(layoutmanagerPlugin);var DOMFix=new (Class({__init:function(){var a=$Agent();if(a.IE||a.Opera){this.childNodes=this._childNodes_Fix;this.parentNode=this._parentNode_Fix;}else{this.childNodes=this._childNodes_Native;this.parentNode=this._parentNode_Native;}},_parentNode_Native:function(a){return a.parentNode;},_parentNode_Fix:function(a){if(!a){return a;}while(a.previousSibling){a=a.previousSibling;}return a.parentNode;},_childNodes_Native:function(a){return a.childNodes;},_childNodes_Fix:function(a){var c=null;var b=0;if(a){var c=[];a=a.firstChild;while(a){c[b++]=a;a=a.nextSibling;}}return c;}}))();if(typeof window.jsCompFileCheckSum=="undefined"){window.jsCompFileCheckSum={};}window.jsCompFileCheckSum.editorLayoutScript=true;